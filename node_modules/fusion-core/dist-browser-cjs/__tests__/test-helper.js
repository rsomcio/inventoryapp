"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.run = run;
var _compose = require("../compose");
/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */

function getContext() {
  return true ? {} : {
    method: 'GET',
    path: '/',
    headers: {
      accept: 'text/html'
    }
  };
}

// @ts-expect-error
function run(app, ctx = {}) {
  ctx = Object.assign(getContext(), ctx);
  app.resolve();
  return (0, _compose.compose)(app.plugins)(ctx, () => Promise.resolve()).then(() => ctx);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRDb250ZXh0IiwibWV0aG9kIiwicGF0aCIsImhlYWRlcnMiLCJhY2NlcHQiLCJydW4iLCJhcHAiLCJjdHgiLCJPYmplY3QiLCJhc3NpZ24iLCJyZXNvbHZlIiwiY29tcG9zZSIsInBsdWdpbnMiLCJQcm9taXNlIiwidGhlbiJdLCJzb3VyY2VzIjpbInNyYy9fX3Rlc3RzX18vdGVzdC1oZWxwZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqIENvcHlyaWdodCAoYykgMjAxOCBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG5pbXBvcnQge2NvbXBvc2V9IGZyb20gJy4uL2NvbXBvc2UnO1xuXG5pbXBvcnQgdHlwZSB7Q29udGV4dH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5mdW5jdGlvbiBnZXRDb250ZXh0KCkge1xuICByZXR1cm4gX19CUk9XU0VSX19cbiAgICA/IHt9XG4gICAgOiB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHBhdGg6ICcvJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIGFjY2VwdDogJ3RleHQvaHRtbCcsXG4gICAgICAgIH0sXG4gICAgICB9O1xufVxuXG4vLyBAdHMtZXhwZWN0LWVycm9yXG5leHBvcnQgZnVuY3Rpb24gcnVuKGFwcDogYW55LCBjdHg6IENvbnRleHQgPSB7fSkge1xuICBjdHggPSBPYmplY3QuYXNzaWduKGdldENvbnRleHQoKSwgY3R4KTtcbiAgYXBwLnJlc29sdmUoKTtcbiAgcmV0dXJuIGNvbXBvc2UoYXBwLnBsdWdpbnMpKGN0eCwgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpLnRoZW4oKCkgPT4gY3R4KTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBT0E7QUFQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBTUEsU0FBU0EsVUFBVSxHQUFHO0VBQ3BCLE9BQU8sT0FDSCxDQUFDLENBQUMsR0FDRjtJQUNFQyxNQUFNLEVBQUUsS0FBSztJQUNiQyxJQUFJLEVBQUUsR0FBRztJQUNUQyxPQUFPLEVBQUU7TUFDUEMsTUFBTSxFQUFFO0lBQ1Y7RUFDRixDQUFDO0FBQ1A7O0FBRUE7QUFDTyxTQUFTQyxHQUFHLENBQUNDLEdBQVEsRUFBRUMsR0FBWSxHQUFHLENBQUMsQ0FBQyxFQUFFO0VBQy9DQSxHQUFHLEdBQUdDLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDVCxVQUFVLEVBQUUsRUFBRU8sR0FBRyxDQUFDO0VBQ3RDRCxHQUFHLENBQUNJLE9BQU8sRUFBRTtFQUNiLE9BQU8sSUFBQUMsZ0JBQU8sRUFBQ0wsR0FBRyxDQUFDTSxPQUFPLENBQUMsQ0FBQ0wsR0FBRyxFQUFFLE1BQU1NLE9BQU8sQ0FBQ0gsT0FBTyxFQUFFLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLE1BQU1QLEdBQUcsQ0FBQztBQUMzRSJ9