"use strict";

var _sanitization = require("../sanitization");
/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */

test('escaping works', async () => {
  expect((0, _sanitization.escape)('<meta name="" />&')).toBe('\\u003Cmeta name=\\u0022\\u0022 /\\u003E\\u0026');
});
test('unescaping works', async () => {
  expect((0, _sanitization.unescape)('\\u003Cmeta name=\\u0022\\u0022 /\\u003E\\u0026')).toBe('<meta name="" />&');
});
test('html sanitization works', async () => {
  const userData = '<malicious data="" />';
  const value = (0, _sanitization.html)`
    <div>${userData}</div>
    ${String(null)}
  `;
  expect(typeof value).toBe('object');
  expect((0, _sanitization.consumeSanitizedHTML)(value)).toBe(`\n    <div>\\u003Cmalicious data=\\u0022\\u0022 /\\u003E</div>\n    null\n  `);
});
test('nested sanitization works', async () => {
  const safe = (0, _sanitization.html)` hello `;
  const value = (0, _sanitization.html)` <div>${safe}</div> `;
  expect(typeof value).toBe('object');
  expect((0, _sanitization.consumeSanitizedHTML)(value)).toBe(` <div> hello </div> `);
});
test('dangerouslySetHTML works', async () => {
  const trusted = (0, _sanitization.dangerouslySetHTML)(JSON.stringify({
    a: 1
  }));
  expect(typeof trusted).toBe('object');
  expect((0, _sanitization.consumeSanitizedHTML)(trusted)).toBe(`{"a":1}`);
});
test('sanitization with empty string works', async () => {
  const obj = (0, _sanitization.dangerouslySetHTML)('');
  expect((0, _sanitization.escape)(obj)).toBe('');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0ZXN0IiwiZXhwZWN0IiwiZXNjYXBlIiwidG9CZSIsInVuZXNjYXBlIiwidXNlckRhdGEiLCJ2YWx1ZSIsImh0bWwiLCJTdHJpbmciLCJjb25zdW1lU2FuaXRpemVkSFRNTCIsInNhZmUiLCJ0cnVzdGVkIiwiZGFuZ2Vyb3VzbHlTZXRIVE1MIiwiSlNPTiIsInN0cmluZ2lmeSIsImEiLCJvYmoiXSwic291cmNlcyI6WyJzcmMvX190ZXN0c19fL3Nhbml0aXphdGlvbi5ub2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBDb3B5cmlnaHQgKGMpIDIwMTggVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuaW1wb3J0IHtcbiAgaHRtbCxcbiAgY29uc3VtZVNhbml0aXplZEhUTUwsXG4gIGRhbmdlcm91c2x5U2V0SFRNTCxcbiAgZXNjYXBlLFxuICB1bmVzY2FwZSxcbn0gZnJvbSAnLi4vc2FuaXRpemF0aW9uJztcblxudGVzdCgnZXNjYXBpbmcgd29ya3MnLCBhc3luYyAoKSA9PiB7XG4gIGV4cGVjdChlc2NhcGUoJzxtZXRhIG5hbWU9XCJcIiAvPiYnKSkudG9CZShcbiAgICAnXFxcXHUwMDNDbWV0YSBuYW1lPVxcXFx1MDAyMlxcXFx1MDAyMiAvXFxcXHUwMDNFXFxcXHUwMDI2J1xuICApO1xufSk7XG50ZXN0KCd1bmVzY2FwaW5nIHdvcmtzJywgYXN5bmMgKCkgPT4ge1xuICBleHBlY3QodW5lc2NhcGUoJ1xcXFx1MDAzQ21ldGEgbmFtZT1cXFxcdTAwMjJcXFxcdTAwMjIgL1xcXFx1MDAzRVxcXFx1MDAyNicpKS50b0JlKFxuICAgICc8bWV0YSBuYW1lPVwiXCIgLz4mJ1xuICApO1xufSk7XG50ZXN0KCdodG1sIHNhbml0aXphdGlvbiB3b3JrcycsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgdXNlckRhdGEgPSAnPG1hbGljaW91cyBkYXRhPVwiXCIgLz4nO1xuICBjb25zdCB2YWx1ZSA9IGh0bWxgXG4gICAgPGRpdj4ke3VzZXJEYXRhfTwvZGl2PlxuICAgICR7U3RyaW5nKG51bGwpfVxuICBgO1xuICBleHBlY3QodHlwZW9mIHZhbHVlKS50b0JlKCdvYmplY3QnKTtcbiAgZXhwZWN0KGNvbnN1bWVTYW5pdGl6ZWRIVE1MKHZhbHVlKSkudG9CZShcbiAgICBgXFxuICAgIDxkaXY+XFxcXHUwMDNDbWFsaWNpb3VzIGRhdGE9XFxcXHUwMDIyXFxcXHUwMDIyIC9cXFxcdTAwM0U8L2Rpdj5cXG4gICAgbnVsbFxcbiAgYFxuICApO1xufSk7XG50ZXN0KCduZXN0ZWQgc2FuaXRpemF0aW9uIHdvcmtzJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBzYWZlID0gaHRtbGAgaGVsbG8gYDtcbiAgY29uc3QgdmFsdWUgPSBodG1sYCA8ZGl2PiR7c2FmZX08L2Rpdj4gYDtcbiAgZXhwZWN0KHR5cGVvZiB2YWx1ZSkudG9CZSgnb2JqZWN0Jyk7XG4gIGV4cGVjdChjb25zdW1lU2FuaXRpemVkSFRNTCh2YWx1ZSkpLnRvQmUoYCA8ZGl2PiBoZWxsbyA8L2Rpdj4gYCk7XG59KTtcbnRlc3QoJ2Rhbmdlcm91c2x5U2V0SFRNTCB3b3JrcycsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgdHJ1c3RlZCA9IGRhbmdlcm91c2x5U2V0SFRNTChKU09OLnN0cmluZ2lmeSh7YTogMX0pKTtcbiAgZXhwZWN0KHR5cGVvZiB0cnVzdGVkKS50b0JlKCdvYmplY3QnKTtcbiAgZXhwZWN0KGNvbnN1bWVTYW5pdGl6ZWRIVE1MKHRydXN0ZWQpKS50b0JlKGB7XCJhXCI6MX1gKTtcbn0pO1xudGVzdCgnc2FuaXRpemF0aW9uIHdpdGggZW1wdHkgc3RyaW5nIHdvcmtzJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBvYmogPSBkYW5nZXJvdXNseVNldEhUTUwoJycpO1xuICBleHBlY3QoZXNjYXBlKG9iaikpLnRvQmUoJycpO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBT0E7QUFQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBVUFBLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxZQUFZO0VBQ2pDQyxNQUFNLENBQUMsSUFBQUMsb0JBQU0sRUFBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FDdEMsaURBQWlELENBQ2xEO0FBQ0gsQ0FBQyxDQUFDO0FBQ0ZILElBQUksQ0FBQyxrQkFBa0IsRUFBRSxZQUFZO0VBQ25DQyxNQUFNLENBQUMsSUFBQUcsc0JBQVEsRUFBQyxpREFBaUQsQ0FBQyxDQUFDLENBQUNELElBQUksQ0FDdEUsbUJBQW1CLENBQ3BCO0FBQ0gsQ0FBQyxDQUFDO0FBQ0ZILElBQUksQ0FBQyx5QkFBeUIsRUFBRSxZQUFZO0VBQzFDLE1BQU1LLFFBQVEsR0FBRyx1QkFBdUI7RUFDeEMsTUFBTUMsS0FBSyxHQUFHLElBQUFDLGtCQUFJLENBQUM7QUFDckIsV0FBV0YsUUFBUztBQUNwQixNQUFNRyxNQUFNLENBQUMsSUFBSSxDQUFFO0FBQ25CLEdBQUc7RUFDRFAsTUFBTSxDQUFDLE9BQU9LLEtBQUssQ0FBQyxDQUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDO0VBQ25DRixNQUFNLENBQUMsSUFBQVEsa0NBQW9CLEVBQUNILEtBQUssQ0FBQyxDQUFDLENBQUNILElBQUksQ0FDckMsOEVBQTZFLENBQy9FO0FBQ0gsQ0FBQyxDQUFDO0FBQ0ZILElBQUksQ0FBQywyQkFBMkIsRUFBRSxZQUFZO0VBQzVDLE1BQU1VLElBQUksR0FBRyxJQUFBSCxrQkFBSSxDQUFDLFNBQVE7RUFDMUIsTUFBTUQsS0FBSyxHQUFHLElBQUFDLGtCQUFJLENBQUMsU0FBUUcsSUFBSyxTQUFRO0VBQ3hDVCxNQUFNLENBQUMsT0FBT0ssS0FBSyxDQUFDLENBQUNILElBQUksQ0FBQyxRQUFRLENBQUM7RUFDbkNGLE1BQU0sQ0FBQyxJQUFBUSxrQ0FBb0IsRUFBQ0gsS0FBSyxDQUFDLENBQUMsQ0FBQ0gsSUFBSSxDQUFFLHNCQUFxQixDQUFDO0FBQ2xFLENBQUMsQ0FBQztBQUNGSCxJQUFJLENBQUMsMEJBQTBCLEVBQUUsWUFBWTtFQUMzQyxNQUFNVyxPQUFPLEdBQUcsSUFBQUMsZ0NBQWtCLEVBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO0lBQUNDLENBQUMsRUFBRTtFQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzFEZCxNQUFNLENBQUMsT0FBT1UsT0FBTyxDQUFDLENBQUNSLElBQUksQ0FBQyxRQUFRLENBQUM7RUFDckNGLE1BQU0sQ0FBQyxJQUFBUSxrQ0FBb0IsRUFBQ0UsT0FBTyxDQUFDLENBQUMsQ0FBQ1IsSUFBSSxDQUFFLFNBQVEsQ0FBQztBQUN2RCxDQUFDLENBQUM7QUFDRkgsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLFlBQVk7RUFDdkQsTUFBTWdCLEdBQUcsR0FBRyxJQUFBSixnQ0FBa0IsRUFBQyxFQUFFLENBQUM7RUFDbENYLE1BQU0sQ0FBQyxJQUFBQyxvQkFBTSxFQUFDYyxHQUFHLENBQUMsQ0FBQyxDQUFDYixJQUFJLENBQUMsRUFBRSxDQUFDO0FBQzlCLENBQUMsQ0FBQyJ9