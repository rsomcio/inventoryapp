/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * 
 */

/* eslint-env browser */
import * as React from 'react';
import Enzyme from 'enzyme';
import Adapter from 'enzyme-adapter-react-16';
import ReactDOM from 'react-dom';
import { prepare } from '../../index.js';
Enzyme.configure({
  adapter: new Adapter()
});
test('Client-side preparing', done => {
  let numRenders = 0;

  function SimplePortal() {
    numRenders++; // $FlowFixMe

    return ReactDOM.createPortal(React.createElement("div", null, "Hello World"), document.body);
  }

  const app = React.createElement(SimplePortal, null);
  const p = prepare(app);
  expect(p instanceof Promise).toBeTruthy();
  p.then(() => {
    expect(numRenders).toBe(1);
    done();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByZXBhcmUtcmVuZGVyLmJyb3dzZXIuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJFbnp5bWUiLCJBZGFwdGVyIiwiUmVhY3RET00iLCJwcmVwYXJlIiwiY29uZmlndXJlIiwiYWRhcHRlciIsInRlc3QiLCJkb25lIiwibnVtUmVuZGVycyIsIlNpbXBsZVBvcnRhbCIsImNyZWF0ZVBvcnRhbCIsImRvY3VtZW50IiwiYm9keSIsImFwcCIsInAiLCJleHBlY3QiLCJQcm9taXNlIiwidG9CZVRydXRoeSIsInRoZW4iLCJ0b0JlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7QUFRQTtBQUNBLE9BQU8sS0FBS0EsS0FBWixNQUF1QixPQUF2QjtBQUNBLE9BQU9DLE1BQVAsTUFBbUIsUUFBbkI7QUFDQSxPQUFPQyxPQUFQLE1BQW9CLHlCQUFwQjtBQUNBLE9BQU9DLFFBQVAsTUFBcUIsV0FBckI7QUFDQSxTQUFRQyxPQUFSLFFBQXNCLGdCQUF0QjtBQUVBSCxNQUFNLENBQUNJLFNBQVAsQ0FBaUI7QUFBQ0MsRUFBQUEsT0FBTyxFQUFFLElBQUlKLE9BQUo7QUFBVixDQUFqQjtBQUVBSyxJQUFJLENBQUMsdUJBQUQsRUFBMEJDLElBQUksSUFBSTtBQUNwQyxNQUFJQyxVQUFVLEdBQUcsQ0FBakI7O0FBQ0EsV0FBU0MsWUFBVCxHQUF3QjtBQUN0QkQsSUFBQUEsVUFBVSxHQURZLENBRXRCOztBQUNBLFdBQU9OLFFBQVEsQ0FBQ1EsWUFBVCxDQUFzQiwrQ0FBdEIsRUFBOENDLFFBQVEsQ0FBQ0MsSUFBdkQsQ0FBUDtBQUNEOztBQUNELFFBQU1DLEdBQUcsR0FBRyxvQkFBQyxZQUFELE9BQVo7QUFDQSxRQUFNQyxDQUFDLEdBQUdYLE9BQU8sQ0FBQ1UsR0FBRCxDQUFqQjtBQUNBRSxFQUFBQSxNQUFNLENBQUNELENBQUMsWUFBWUUsT0FBZCxDQUFOLENBQTZCQyxVQUE3QjtBQUNBSCxFQUFBQSxDQUFDLENBQUNJLElBQUYsQ0FBTyxNQUFNO0FBQ1hILElBQUFBLE1BQU0sQ0FBQ1AsVUFBRCxDQUFOLENBQW1CVyxJQUFuQixDQUF3QixDQUF4QjtBQUNBWixJQUFBQSxJQUFJO0FBQ0wsR0FIRDtBQUlELENBZEcsQ0FBSiIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBDb3B5cmlnaHQgKGMpIDIwMTggVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICovXG5cbi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEVuenltZSBmcm9tICdlbnp5bWUnO1xuaW1wb3J0IEFkYXB0ZXIgZnJvbSAnZW56eW1lLWFkYXB0ZXItcmVhY3QtMTYnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQge3ByZXBhcmV9IGZyb20gJy4uLy4uL2luZGV4LmpzJztcblxuRW56eW1lLmNvbmZpZ3VyZSh7YWRhcHRlcjogbmV3IEFkYXB0ZXIoKX0pO1xuXG50ZXN0KCdDbGllbnQtc2lkZSBwcmVwYXJpbmcnLCBkb25lID0+IHtcbiAgbGV0IG51bVJlbmRlcnMgPSAwO1xuICBmdW5jdGlvbiBTaW1wbGVQb3J0YWwoKSB7XG4gICAgbnVtUmVuZGVycysrO1xuICAgIC8vICRGbG93Rml4TWVcbiAgICByZXR1cm4gUmVhY3RET00uY3JlYXRlUG9ydGFsKDxkaXY+SGVsbG8gV29ybGQ8L2Rpdj4sIGRvY3VtZW50LmJvZHkpO1xuICB9XG4gIGNvbnN0IGFwcCA9IDxTaW1wbGVQb3J0YWwgLz47XG4gIGNvbnN0IHAgPSBwcmVwYXJlKGFwcCk7XG4gIGV4cGVjdChwIGluc3RhbmNlb2YgUHJvbWlzZSkudG9CZVRydXRoeSgpO1xuICBwLnRoZW4oKCkgPT4ge1xuICAgIGV4cGVjdChudW1SZW5kZXJzKS50b0JlKDEpO1xuICAgIGRvbmUoKTtcbiAgfSk7XG59KTtcbiJdfQ==