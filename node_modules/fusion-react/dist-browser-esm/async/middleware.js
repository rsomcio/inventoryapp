/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * 
 */
import * as React from 'react';
import PrepareProvider from './prepare-provider';

const middleware = function (ctx, next) {
  if (process.env.NODE_ENV !== "production") {
    // eslint-disable-next-line no-console
    console.warn('The {middleware} export from fusion-react is deprecated.');
  }

  if (false && !ctx.element) {
    return next();
  }

  const markAsCritical = false ? chunkId => {
    // Push to legacy context for backwards compat w/ legacy SSR template
    ctx.preloadChunks.push(chunkId);
  } : noop;
  ctx.element = React.createElement(PrepareProvider, {
    markAsCritical: markAsCritical
  }, ctx.element);
  return next();
};

export default middleware;

function noop() {}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pZGRsZXdhcmUuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJQcmVwYXJlUHJvdmlkZXIiLCJtaWRkbGV3YXJlIiwiY3R4IiwibmV4dCIsImNvbnNvbGUiLCJ3YXJuIiwiZWxlbWVudCIsIm1hcmtBc0NyaXRpY2FsIiwiY2h1bmtJZCIsInByZWxvYWRDaHVua3MiLCJwdXNoIiwibm9vcCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUFRQSxPQUFPLEtBQUtBLEtBQVosTUFBdUIsT0FBdkI7QUFJQSxPQUFPQyxlQUFQLE1BQTRCLG9CQUE1Qjs7QUFFQSxNQUFNQyxVQUFzQixHQUFHLFVBQVNDLEdBQVQsRUFBY0MsSUFBZCxFQUFvQjtBQUNqRCw2Q0FBYTtBQUNYO0FBQ0FDLElBQUFBLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLDBEQUFiO0FBQ0Q7O0FBRUQsTUFBSSxTQUFZLENBQUNILEdBQUcsQ0FBQ0ksT0FBckIsRUFBOEI7QUFDNUIsV0FBT0gsSUFBSSxFQUFYO0FBQ0Q7O0FBRUQsUUFBTUksY0FBYyxHQUFHLFFBQ25CQyxPQUFPLElBQUk7QUFDVDtBQUNBTixJQUFBQSxHQUFHLENBQUNPLGFBQUosQ0FBa0JDLElBQWxCLENBQXVCRixPQUF2QjtBQUNELEdBSmtCLEdBS25CRyxJQUxKO0FBTUFULEVBQUFBLEdBQUcsQ0FBQ0ksT0FBSixHQUNFLG9CQUFDLGVBQUQ7QUFBaUIsSUFBQSxjQUFjLEVBQUVDO0FBQWpDLEtBQ0dMLEdBQUcsQ0FBQ0ksT0FEUCxDQURGO0FBS0EsU0FBT0gsSUFBSSxFQUFYO0FBQ0QsQ0F0QkQ7O0FBd0JBLGVBQWVGLFVBQWY7O0FBRUEsU0FBU1UsSUFBVCxHQUFnQixDQUFFIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIENvcHlyaWdodCAoYykgMjAxOCBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgdHlwZSB7TWlkZGxld2FyZX0gZnJvbSAnZnVzaW9uLWNvcmUnO1xuXG5pbXBvcnQgUHJlcGFyZVByb3ZpZGVyIGZyb20gJy4vcHJlcGFyZS1wcm92aWRlcic7XG5cbmNvbnN0IG1pZGRsZXdhcmU6IE1pZGRsZXdhcmUgPSBmdW5jdGlvbihjdHgsIG5leHQpIHtcbiAgaWYgKF9fREVWX18pIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUud2FybignVGhlIHttaWRkbGV3YXJlfSBleHBvcnQgZnJvbSBmdXNpb24tcmVhY3QgaXMgZGVwcmVjYXRlZC4nKTtcbiAgfVxuXG4gIGlmIChfX05PREVfXyAmJiAhY3R4LmVsZW1lbnQpIHtcbiAgICByZXR1cm4gbmV4dCgpO1xuICB9XG5cbiAgY29uc3QgbWFya0FzQ3JpdGljYWwgPSBfX05PREVfX1xuICAgID8gY2h1bmtJZCA9PiB7XG4gICAgICAgIC8vIFB1c2ggdG8gbGVnYWN5IGNvbnRleHQgZm9yIGJhY2t3YXJkcyBjb21wYXQgdy8gbGVnYWN5IFNTUiB0ZW1wbGF0ZVxuICAgICAgICBjdHgucHJlbG9hZENodW5rcy5wdXNoKGNodW5rSWQpO1xuICAgICAgfVxuICAgIDogbm9vcDtcbiAgY3R4LmVsZW1lbnQgPSAoXG4gICAgPFByZXBhcmVQcm92aWRlciBtYXJrQXNDcml0aWNhbD17bWFya0FzQ3JpdGljYWx9PlxuICAgICAge2N0eC5lbGVtZW50fVxuICAgIDwvUHJlcGFyZVByb3ZpZGVyPlxuICApO1xuICByZXR1cm4gbmV4dCgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbWlkZGxld2FyZTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG4iXX0=