/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */

import React from 'react';
import App from 'fusion-react';
import { getSimulator } from 'fusion-test-utils';
import HelmetPlugin from '../index';
test('Non render request', async () => {
  const app = new App( /*#__PURE__*/React.createElement('div'), el => el);
  app.register(HelmetPlugin);
  const sim = getSimulator(app);
  const ctx = await sim.request('/');
  expect(ctx.element).toBe(null);
});
test('Render request with server side redirect', async () => {
  const app = new App( /*#__PURE__*/React.createElement('div'), el => el);
  app.register(HelmetPlugin);
  app.middleware((ctx, next) => {
    ctx.redirect('/test');
    return next();
  });
  const sim = getSimulator(app);
  await sim.render('/');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsIkFwcCIsImdldFNpbXVsYXRvciIsIkhlbG1ldFBsdWdpbiIsInRlc3QiLCJhcHAiLCJjcmVhdGVFbGVtZW50IiwiZWwiLCJyZWdpc3RlciIsInNpbSIsImN0eCIsInJlcXVlc3QiLCJleHBlY3QiLCJlbGVtZW50IiwidG9CZSIsIm1pZGRsZXdhcmUiLCJuZXh0IiwicmVkaXJlY3QiLCJyZW5kZXIiXSwic291cmNlcyI6WyJzcmMvX190ZXN0c19fL3JlcXVlc3Qubm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQ29weXJpZ2h0IChjKSAyMDE4IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQXBwIGZyb20gJ2Z1c2lvbi1yZWFjdCc7XG5pbXBvcnQge2dldFNpbXVsYXRvcn0gZnJvbSAnZnVzaW9uLXRlc3QtdXRpbHMnO1xuaW1wb3J0IEhlbG1ldFBsdWdpbiBmcm9tICcuLi9pbmRleCc7XG5cbnRlc3QoJ05vbiByZW5kZXIgcmVxdWVzdCcsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgYXBwID0gbmV3IEFwcChSZWFjdC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgKGVsKSA9PiBlbCk7XG4gIGFwcC5yZWdpc3RlcihIZWxtZXRQbHVnaW4pO1xuICBjb25zdCBzaW0gPSBnZXRTaW11bGF0b3IoYXBwKTtcbiAgY29uc3QgY3R4ID0gYXdhaXQgc2ltLnJlcXVlc3QoJy8nKTtcbiAgZXhwZWN0KGN0eC5lbGVtZW50KS50b0JlKG51bGwpO1xufSk7XG5cbnRlc3QoJ1JlbmRlciByZXF1ZXN0IHdpdGggc2VydmVyIHNpZGUgcmVkaXJlY3QnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGFwcCA9IG5ldyBBcHAoUmVhY3QuY3JlYXRlRWxlbWVudCgnZGl2JyksIChlbCkgPT4gZWwpO1xuICBhcHAucmVnaXN0ZXIoSGVsbWV0UGx1Z2luKTtcbiAgYXBwLm1pZGRsZXdhcmUoKGN0eCwgbmV4dCkgPT4ge1xuICAgIGN0eC5yZWRpcmVjdCgnL3Rlc3QnKTtcbiAgICByZXR1cm4gbmV4dCgpO1xuICB9KTtcbiAgY29uc3Qgc2ltID0gZ2V0U2ltdWxhdG9yKGFwcCk7XG4gIGF3YWl0IHNpbS5yZW5kZXIoJy8nKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLE9BQU87QUFDekIsT0FBT0MsR0FBRyxNQUFNLGNBQWM7QUFDOUIsU0FBUUMsWUFBWSxRQUFPLG1CQUFtQjtBQUM5QyxPQUFPQyxZQUFZLE1BQU0sVUFBVTtBQUVuQ0MsSUFBSSxDQUFDLG9CQUFvQixFQUFFLFlBQVk7RUFDckMsTUFBTUMsR0FBRyxHQUFHLElBQUlKLEdBQUcsZUFBQ0QsS0FBSyxDQUFDTSxhQUFhLENBQUMsS0FBSyxDQUFDLEVBQUdDLEVBQUUsSUFBS0EsRUFBRSxDQUFDO0VBQzNERixHQUFHLENBQUNHLFFBQVEsQ0FBQ0wsWUFBWSxDQUFDO0VBQzFCLE1BQU1NLEdBQUcsR0FBR1AsWUFBWSxDQUFDRyxHQUFHLENBQUM7RUFDN0IsTUFBTUssR0FBRyxHQUFHLE1BQU1ELEdBQUcsQ0FBQ0UsT0FBTyxDQUFDLEdBQUcsQ0FBQztFQUNsQ0MsTUFBTSxDQUFDRixHQUFHLENBQUNHLE9BQU8sQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ2hDLENBQUMsQ0FBQztBQUVGVixJQUFJLENBQUMsMENBQTBDLEVBQUUsWUFBWTtFQUMzRCxNQUFNQyxHQUFHLEdBQUcsSUFBSUosR0FBRyxlQUFDRCxLQUFLLENBQUNNLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFBR0MsRUFBRSxJQUFLQSxFQUFFLENBQUM7RUFDM0RGLEdBQUcsQ0FBQ0csUUFBUSxDQUFDTCxZQUFZLENBQUM7RUFDMUJFLEdBQUcsQ0FBQ1UsVUFBVSxDQUFDLENBQUNMLEdBQUcsRUFBRU0sSUFBSSxLQUFLO0lBQzVCTixHQUFHLENBQUNPLFFBQVEsQ0FBQyxPQUFPLENBQUM7SUFDckIsT0FBT0QsSUFBSSxFQUFFO0VBQ2YsQ0FBQyxDQUFDO0VBQ0YsTUFBTVAsR0FBRyxHQUFHUCxZQUFZLENBQUNHLEdBQUcsQ0FBQztFQUM3QixNQUFNSSxHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDdkIsQ0FBQyxDQUFDIn0=