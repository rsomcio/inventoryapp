"use strict";

var _react = _interopRequireDefault(require("react"));
var _fusionReact = _interopRequireDefault(require("fusion-react"));
var _fusionTestUtils = require("fusion-test-utils");
var _index = _interopRequireDefault(require("../index"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */

test('Non render request', async () => {
  const app = new _fusionReact.default( /*#__PURE__*/_react.default.createElement('div'), el => el);
  app.register(_index.default);
  const sim = (0, _fusionTestUtils.getSimulator)(app);
  const ctx = await sim.request('/');
  expect(ctx.element).toBe(null);
});
test('Render request with server side redirect', async () => {
  const app = new _fusionReact.default( /*#__PURE__*/_react.default.createElement('div'), el => el);
  app.register(_index.default);
  app.middleware((ctx, next) => {
    ctx.redirect('/test');
    return next();
  });
  const sim = (0, _fusionTestUtils.getSimulator)(app);
  await sim.render('/');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0ZXN0IiwiYXBwIiwiQXBwIiwiUmVhY3QiLCJjcmVhdGVFbGVtZW50IiwiZWwiLCJyZWdpc3RlciIsIkhlbG1ldFBsdWdpbiIsInNpbSIsImdldFNpbXVsYXRvciIsImN0eCIsInJlcXVlc3QiLCJleHBlY3QiLCJlbGVtZW50IiwidG9CZSIsIm1pZGRsZXdhcmUiLCJuZXh0IiwicmVkaXJlY3QiLCJyZW5kZXIiXSwic291cmNlcyI6WyJzcmMvX190ZXN0c19fL3JlcXVlc3Qubm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQ29weXJpZ2h0IChjKSAyMDE4IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQXBwIGZyb20gJ2Z1c2lvbi1yZWFjdCc7XG5pbXBvcnQge2dldFNpbXVsYXRvcn0gZnJvbSAnZnVzaW9uLXRlc3QtdXRpbHMnO1xuaW1wb3J0IEhlbG1ldFBsdWdpbiBmcm9tICcuLi9pbmRleCc7XG5cbnRlc3QoJ05vbiByZW5kZXIgcmVxdWVzdCcsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgYXBwID0gbmV3IEFwcChSZWFjdC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgKGVsKSA9PiBlbCk7XG4gIGFwcC5yZWdpc3RlcihIZWxtZXRQbHVnaW4pO1xuICBjb25zdCBzaW0gPSBnZXRTaW11bGF0b3IoYXBwKTtcbiAgY29uc3QgY3R4ID0gYXdhaXQgc2ltLnJlcXVlc3QoJy8nKTtcbiAgZXhwZWN0KGN0eC5lbGVtZW50KS50b0JlKG51bGwpO1xufSk7XG5cbnRlc3QoJ1JlbmRlciByZXF1ZXN0IHdpdGggc2VydmVyIHNpZGUgcmVkaXJlY3QnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGFwcCA9IG5ldyBBcHAoUmVhY3QuY3JlYXRlRWxlbWVudCgnZGl2JyksIChlbCkgPT4gZWwpO1xuICBhcHAucmVnaXN0ZXIoSGVsbWV0UGx1Z2luKTtcbiAgYXBwLm1pZGRsZXdhcmUoKGN0eCwgbmV4dCkgPT4ge1xuICAgIGN0eC5yZWRpcmVjdCgnL3Rlc3QnKTtcbiAgICByZXR1cm4gbmV4dCgpO1xuICB9KTtcbiAgY29uc3Qgc2ltID0gZ2V0U2ltdWxhdG9yKGFwcCk7XG4gIGF3YWl0IHNpbS5yZW5kZXIoJy8nKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQW9DO0FBVnBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFPQUEsSUFBSSxDQUFDLG9CQUFvQixFQUFFLFlBQVk7RUFDckMsTUFBTUMsR0FBRyxHQUFHLElBQUlDLG9CQUFHLGVBQUNDLGNBQUssQ0FBQ0MsYUFBYSxDQUFDLEtBQUssQ0FBQyxFQUFHQyxFQUFFLElBQUtBLEVBQUUsQ0FBQztFQUMzREosR0FBRyxDQUFDSyxRQUFRLENBQUNDLGNBQVksQ0FBQztFQUMxQixNQUFNQyxHQUFHLEdBQUcsSUFBQUMsNkJBQVksRUFBQ1IsR0FBRyxDQUFDO0VBQzdCLE1BQU1TLEdBQUcsR0FBRyxNQUFNRixHQUFHLENBQUNHLE9BQU8sQ0FBQyxHQUFHLENBQUM7RUFDbENDLE1BQU0sQ0FBQ0YsR0FBRyxDQUFDRyxPQUFPLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQztBQUNoQyxDQUFDLENBQUM7QUFFRmQsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLFlBQVk7RUFDM0QsTUFBTUMsR0FBRyxHQUFHLElBQUlDLG9CQUFHLGVBQUNDLGNBQUssQ0FBQ0MsYUFBYSxDQUFDLEtBQUssQ0FBQyxFQUFHQyxFQUFFLElBQUtBLEVBQUUsQ0FBQztFQUMzREosR0FBRyxDQUFDSyxRQUFRLENBQUNDLGNBQVksQ0FBQztFQUMxQk4sR0FBRyxDQUFDYyxVQUFVLENBQUMsQ0FBQ0wsR0FBRyxFQUFFTSxJQUFJLEtBQUs7SUFDNUJOLEdBQUcsQ0FBQ08sUUFBUSxDQUFDLE9BQU8sQ0FBQztJQUNyQixPQUFPRCxJQUFJLEVBQUU7RUFDZixDQUFDLENBQUM7RUFDRixNQUFNUixHQUFHLEdBQUcsSUFBQUMsNkJBQVksRUFBQ1IsR0FBRyxDQUFDO0VBQzdCLE1BQU1PLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQztBQUN2QixDQUFDLENBQUMifQ==