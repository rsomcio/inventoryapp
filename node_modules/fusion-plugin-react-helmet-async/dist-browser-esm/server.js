/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */

import React from 'react';
import { jsx as _jsx } from "react/jsx-runtime";
const keys = ['meta', 'link', 'style', 'base', 'noscript', 'script'];
const plugin = false && createPlugin({
  middleware: () => {
    return async (ctx, next) => {
      if (!ctx.element) {
        return next();
      }
      const helmetContext = {};
      ctx.element = /*#__PURE__*/_jsx(HelmetProvider, {
        context: helmetContext,
        children: ctx.element
      });
      await next();
      const {
        helmet
      } = helmetContext;
      if (helmet) {
        ctx.template.title = dangerouslySetHTML(helmet.title.toString().replace('</title>', '').replace(/^<title.*>/, ''));
        keys.forEach(key => {
          ctx.template.head.push(dangerouslySetHTML(helmet[key].toString()));
        });
        Object.assign(ctx.template.htmlAttrs, helmet.htmlAttributes.toComponent());
      }
    };
  }
});
export default plugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsImtleXMiLCJwbHVnaW4iLCJjcmVhdGVQbHVnaW4iLCJtaWRkbGV3YXJlIiwiY3R4IiwibmV4dCIsImVsZW1lbnQiLCJoZWxtZXRDb250ZXh0IiwiaGVsbWV0IiwidGVtcGxhdGUiLCJ0aXRsZSIsImRhbmdlcm91c2x5U2V0SFRNTCIsInRvU3RyaW5nIiwicmVwbGFjZSIsImZvckVhY2giLCJrZXkiLCJoZWFkIiwicHVzaCIsIk9iamVjdCIsImFzc2lnbiIsImh0bWxBdHRycyIsImh0bWxBdHRyaWJ1dGVzIiwidG9Db21wb25lbnQiXSwic291cmNlcyI6WyJzcmMvc2VydmVyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQ29weXJpZ2h0IChjKSAyMDE4IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge2NyZWF0ZVBsdWdpbiwgZGFuZ2Vyb3VzbHlTZXRIVE1MfSBmcm9tICdmdXNpb24tY29yZSc7XG5pbXBvcnQge0hlbG1ldFByb3ZpZGVyfSBmcm9tICdyZWFjdC1oZWxtZXQtYXN5bmMnO1xuXG5pbXBvcnQgdHlwZSB7RnVzaW9uUGx1Z2lufSBmcm9tICdmdXNpb24tY29yZSc7XG5cbmNvbnN0IGtleXMgPSBbJ21ldGEnLCAnbGluaycsICdzdHlsZScsICdiYXNlJywgJ25vc2NyaXB0JywgJ3NjcmlwdCddO1xuXG5jb25zdCBwbHVnaW4gPVxuICBfX05PREVfXyAmJlxuICBjcmVhdGVQbHVnaW4oe1xuICAgIG1pZGRsZXdhcmU6ICgpID0+IHtcbiAgICAgIHJldHVybiBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG4gICAgICAgIGlmICghY3R4LmVsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlbG1ldENvbnRleHQ6IGFueSA9IHt9O1xuICAgICAgICBjdHguZWxlbWVudCA9IChcbiAgICAgICAgICA8SGVsbWV0UHJvdmlkZXIgY29udGV4dD17aGVsbWV0Q29udGV4dH0+e2N0eC5lbGVtZW50fTwvSGVsbWV0UHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICAgIGF3YWl0IG5leHQoKTtcbiAgICAgICAgY29uc3Qge2hlbG1ldH0gPSBoZWxtZXRDb250ZXh0O1xuICAgICAgICBpZiAoaGVsbWV0KSB7XG4gICAgICAgICAgY3R4LnRlbXBsYXRlLnRpdGxlID0gZGFuZ2Vyb3VzbHlTZXRIVE1MKFxuICAgICAgICAgICAgaGVsbWV0LnRpdGxlXG4gICAgICAgICAgICAgIC50b1N0cmluZygpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKCc8L3RpdGxlPicsICcnKVxuICAgICAgICAgICAgICAucmVwbGFjZSgvXjx0aXRsZS4qPi8sICcnKVxuICAgICAgICAgICk7XG4gICAgICAgICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGN0eC50ZW1wbGF0ZS5oZWFkLnB1c2goZGFuZ2Vyb3VzbHlTZXRIVE1MKGhlbG1ldFtrZXldLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgY3R4LnRlbXBsYXRlLmh0bWxBdHRycyxcbiAgICAgICAgICAgIGhlbG1ldC5odG1sQXR0cmlidXRlcy50b0NvbXBvbmVudCgpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICB9KTtcblxuZXhwb3J0IGRlZmF1bHQgcGx1Z2luIGFzIGFueSBhcyBGdXNpb25QbHVnaW48dW5kZWZpbmVkLCB1bmRlZmluZWQ+O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLE9BQU87QUFBQztBQU0xQixNQUFNQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsQ0FBQztBQUVwRSxNQUFNQyxNQUFNLEdBQ1YsU0FDQUMsWUFBWSxDQUFDO0VBQ1hDLFVBQVUsRUFBRSxNQUFNO0lBQ2hCLE9BQU8sT0FBT0MsR0FBRyxFQUFFQyxJQUFJLEtBQUs7TUFDMUIsSUFBSSxDQUFDRCxHQUFHLENBQUNFLE9BQU8sRUFBRTtRQUNoQixPQUFPRCxJQUFJLEVBQUU7TUFDZjtNQUNBLE1BQU1FLGFBQWtCLEdBQUcsQ0FBQyxDQUFDO01BQzdCSCxHQUFHLENBQUNFLE9BQU8sZ0JBQ1QsS0FBQyxjQUFjO1FBQUMsT0FBTyxFQUFFQyxhQUFjO1FBQUEsVUFBRUgsR0FBRyxDQUFDRTtNQUFPLEVBQ3JEO01BQ0QsTUFBTUQsSUFBSSxFQUFFO01BQ1osTUFBTTtRQUFDRztNQUFNLENBQUMsR0FBR0QsYUFBYTtNQUM5QixJQUFJQyxNQUFNLEVBQUU7UUFDVkosR0FBRyxDQUFDSyxRQUFRLENBQUNDLEtBQUssR0FBR0Msa0JBQWtCLENBQ3JDSCxNQUFNLENBQUNFLEtBQUssQ0FDVEUsUUFBUSxFQUFFLENBQ1ZDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLENBQ3ZCQSxPQUFPLENBQUMsWUFBWSxFQUFFLEVBQUUsQ0FBQyxDQUM3QjtRQUNEYixJQUFJLENBQUNjLE9BQU8sQ0FBRUMsR0FBRyxJQUFLO1VBQ3BCWCxHQUFHLENBQUNLLFFBQVEsQ0FBQ08sSUFBSSxDQUFDQyxJQUFJLENBQUNOLGtCQUFrQixDQUFDSCxNQUFNLENBQUNPLEdBQUcsQ0FBQyxDQUFDSCxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQ3BFLENBQUMsQ0FBQztRQUNGTSxNQUFNLENBQUNDLE1BQU0sQ0FDWGYsR0FBRyxDQUFDSyxRQUFRLENBQUNXLFNBQVMsRUFDdEJaLE1BQU0sQ0FBQ2EsY0FBYyxDQUFDQyxXQUFXLEVBQUUsQ0FDcEM7TUFDSDtJQUNGLENBQUM7RUFDSDtBQUNGLENBQUMsQ0FBQztBQUVKLGVBQWVyQixNQUFNIn0=