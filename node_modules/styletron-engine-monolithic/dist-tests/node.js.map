{"version":3,"file":"node.js","sources":["../src/hyphenate-style-name.js","../src/validate-no-mixed-hand.js","../src/inject-style-prefixed.js","../src/validate-keyframes-object.js","../src/generate-alphabetic-name.js","../src/hash.js","../src/css.js","../src/server/server.js","../src/server/__tests__/tests.node.js"],"sourcesContent":["// @flow\n\nconst uppercasePattern = /[A-Z]/g;\nconst msPattern = /^ms-/;\nconst cache = {};\n\nexport default function hyphenateStyleName(prop: string): string {\n  return prop in cache\n    ? cache[prop]\n    : (cache[prop] = prop\n        .replace(uppercasePattern, \"-$&\")\n        .toLowerCase()\n        .replace(msPattern, \"-ms-\"));\n}\n","// @flow\n\n/**\n * Adapted from https://github.com/gilmoreorless/css-shorthand-properties\n */\n\nimport hyphenate from \"./hyphenate-style-name.js\";\n\nconst shorthandMap = {\n  // CSS 2.1: https://www.w3.org/TR/CSS2/propidx.html\n  \"list-style\": [\"list-style-type\", \"list-style-position\", \"list-style-image\"],\n  margin: [\"margin-top\", \"margin-right\", \"margin-bottom\", \"margin-left\"],\n  outline: [\"outline-width\", \"outline-style\", \"outline-color\"],\n  padding: [\"padding-top\", \"padding-right\", \"padding-bottom\", \"padding-left\"],\n\n  // CSS Backgrounds and Borders Module Level 3: https://www.w3.org/TR/css3-background/\n  background: [\n    \"background-image\",\n    \"background-position\",\n    \"background-size\",\n    \"background-repeat\",\n    \"background-origin\",\n    \"background-clip\",\n    \"background-attachment\",\n    \"background-color\",\n  ],\n  border: [\n    \"border-top-width\",\n    \"border-right-width\",\n    \"border-bottom-width\",\n    \"border-left-width\",\n    \"border-width\",\n    \"border-top-style\",\n    \"border-right-style\",\n    \"border-bottom-style\",\n    \"border-left-style\",\n    \"border-style\",\n    \"border-top-color\",\n    \"border-right-color\",\n    \"border-bottom-color\",\n    \"border-left-color\",\n    \"border-color\",\n  ],\n  \"border-color\": [\n    \"border-top-color\",\n    \"border-right-color\",\n    \"border-bottom-color\",\n    \"border-left-color\",\n  ],\n  \"border-style\": [\n    \"border-top-style\",\n    \"border-right-style\",\n    \"border-bottom-style\",\n    \"border-left-style\",\n  ],\n  \"border-width\": [\n    \"border-top-width\",\n    \"border-right-width\",\n    \"border-bottom-width\",\n    \"border-left-width\",\n  ],\n  \"border-top\": [\"border-top-width\", \"border-top-style\", \"border-top-color\"],\n  \"border-right\": [\n    \"border-right-width\",\n    \"border-right-style\",\n    \"border-right-color\",\n  ],\n  \"border-bottom\": [\n    \"border-bottom-width\",\n    \"border-bottom-style\",\n    \"border-bottom-color\",\n  ],\n  \"border-left\": [\n    \"border-left-width\",\n    \"border-left-style\",\n    \"border-left-color\",\n  ],\n  \"border-radius\": [\n    \"border-top-left-radius\",\n    \"border-top-right-radius\",\n    \"border-bottom-right-radius\",\n    \"border-bottom-left-radius\",\n  ],\n  \"border-image\": [\n    \"border-image-source\",\n    \"border-image-slice\",\n    \"border-image-width\",\n    \"border-image-outset\",\n    \"border-image-repeat\",\n  ],\n\n  // CSS Fonts Module Level 3: https://www.w3.org/TR/css3-fonts/\n  font: [\n    \"font-style\",\n    \"font-variant-ligatures\",\n    \"font-variant-alternates\",\n    \"font-variant-caps\",\n    \"font-variant-numeric\",\n    \"font-variant-east-asian\",\n    \"font-variant\",\n    \"font-weight\",\n    \"font-stretch\",\n    \"font-size\",\n    \"line-height\",\n    \"font-family\",\n  ],\n  \"font-variant\": [\n    \"font-variant-ligatures\",\n    \"font-variant-alternates\",\n    \"font-variant-caps\",\n    \"font-variant-numeric\",\n    \"font-variant-east-asian\",\n  ],\n\n  // CSS Flexible Box Layout Module Level 1: https://www.w3.org/TR/css3-flexbox-1/\n  flex: [\"flex-grow\", \"flex-shrink\", \"flex-basis\"],\n  \"flex-flow\": [\"flex-direction\", \"flex-wrap\"],\n\n  // CSS Grid Layout Module Level 1: https://www.w3.org/TR/css-grid-1/\n  grid: [\n    \"grid-template-rows\",\n    \"grid-template-columns\",\n    \"grid-template-areas\",\n    \"grid-auto-rows\",\n    \"grid-auto-columns\",\n    \"grid-auto-flow\",\n  ],\n  \"grid-template\": [\n    \"grid-template-rows\",\n    \"grid-template-columns\",\n    \"grid-template-areas\",\n  ],\n  \"grid-row\": [\"grid-row-start\", \"grid-row-end\"],\n  \"grid-column\": [\"grid-column-start\", \"grid-column-end\"],\n  \"grid-area\": [\n    \"grid-row-start\",\n    \"grid-column-start\",\n    \"grid-row-end\",\n    \"grid-column-end\",\n  ],\n  \"grid-gap\": [\"grid-row-gap\", \"grid-column-gap\"],\n\n  // CSS Masking Module Level 1: https://www.w3.org/TR/css-masking/\n  mask: [\n    \"mask-image\",\n    \"mask-mode\",\n    \"mask-position\",\n    \"mask-size\",\n    \"mask-repeat\",\n    \"mask-origin\",\n    \"mask-clip\",\n  ],\n  \"mask-border\": [\n    \"mask-border-source\",\n    \"mask-border-slice\",\n    \"mask-border-width\",\n    \"mask-border-outset\",\n    \"mask-border-repeat\",\n    \"mask-border-mode\",\n  ],\n\n  // CSS Multi-column Layout Module: https://www.w3.org/TR/css3-multicol/\n  columns: [\"column-width\", \"column-count\"],\n  \"column-rule\": [\n    \"column-rule-width\",\n    \"column-rule-style\",\n    \"column-rule-color\",\n  ],\n\n  // CSS Scroll Snap Module Level 1: https://www.w3.org/TR/css-scroll-snap-1/\n  \"scroll-padding\": [\n    \"scroll-padding-top\",\n    \"scroll-padding-right\",\n    \"scroll-padding-bottom\",\n    \"scroll-padding-left\",\n  ],\n  \"scroll-padding-block\": [\n    \"scroll-padding-block-start\",\n    \"scroll-padding-block-end\",\n  ],\n  \"scroll-padding-inline\": [\n    \"scroll-padding-inline-start\",\n    \"scroll-padding-inline-end\",\n  ],\n  \"scroll-snap-margin\": [\n    \"scroll-snap-margin-top\",\n    \"scroll-snap-margin-right\",\n    \"scroll-snap-margin-bottom\",\n    \"scroll-snap-margin-left\",\n  ],\n  \"scroll-snap-margin-block\": [\n    \"scroll-snap-margin-block-start\",\n    \"scroll-snap-margin-block-end\",\n  ],\n  \"scroll-snap-margin-inline\": [\n    \"scroll-snap-margin-inline-start\",\n    \"scroll-snap-margin-inline-end\",\n  ],\n\n  // CSS Speech Module: https://www.w3.org/TR/css3-speech/\n  cue: [\"cue-before\", \"cue-after\"],\n  pause: [\"pause-before\", \"pause-after\"],\n  rest: [\"rest-before\", \"rest-after\"],\n\n  // CSS Text Decoration Module Level 3: https://www.w3.org/TR/css-text-decor-3/\n  \"text-decoration\": [\n    \"text-decoration-line\",\n    \"text-decoration-style\",\n    \"text-decoration-color\",\n  ],\n  \"text-emphasis\": [\"text-emphasis-style\", \"text-emphasis-color\"],\n\n  // CSS Animations (WD): https://www.w3.org/TR/css3-animations\n  animation: [\n    \"animation-name\",\n    \"animation-duration\",\n    \"animation-timing-function\",\n    \"animation-delay\",\n    \"animation-iteration-count\",\n    \"animation-direction\",\n    \"animation-fill-mode\",\n    \"animation-play-state\",\n  ],\n\n  // CSS Transitions (WD): https://www.w3.org/TR/css3-transitions/\n  transition: [\n    \"transition-property\",\n    \"transition-duration\",\n    \"transition-timing-function\",\n    \"transition-delay\",\n  ],\n};\n\nexport function validateNoMixedHand(style: Object) {\n  const hyphenatedProperties = Object.keys(style).reduce((acc, property) => {\n    acc[hyphenate(property)] = property;\n    return acc;\n  }, {});\n\n  const mixed = [];\n  for (const property in hyphenatedProperties) {\n    if (property in shorthandMap) {\n      for (const longhand of shorthandMap[property]) {\n        if (longhand in hyphenatedProperties) {\n          const long = hyphenatedProperties[longhand];\n          const short = hyphenatedProperties[property];\n          mixed.push({\n            shorthand: {property: short, value: style[short]},\n            longhand: {property: long, value: style[long]},\n          });\n        }\n      }\n    }\n  }\n  return mixed;\n}\n","// @flow\n\ndeclare var __DEV__: boolean;\n\nimport hyphenate from \"./hyphenate-style-name.js\";\nimport {validateNoMixedHand} from \"./validate-no-mixed-hand.js\";\nimport {prefix as prefixRule} from \"inline-style-prefixer\";\n\nimport type {StyleObject} from \"styletron-standard\";\n\nexport default function injectStylePrefixed(\n  styles: StyleObject,\n  selector: string,\n  prefix: string,\n  strict: boolean,\n) {\n  let rules = \"\";\n  let classes = [];\n\n  for (const key in styles) {\n    const value = styles[key];\n\n    if (value === void 0 || value === null) {\n      continue;\n    }\n\n    if (typeof value !== \"object\") {\n      if (__DEV__) {\n        if (\n          value === null ||\n          Array.isArray(value) ||\n          (typeof value !== \"number\" && typeof value !== \"string\")\n        ) {\n          throw new Error(\n            `Unsupported style value: ${JSON.stringify(\n              value,\n            )} used in property ${JSON.stringify(key)}`,\n          );\n        }\n      }\n\n      const rule = hyphenate(key) + \":\" + value;\n      const prefixed = prefixRule({[key]: value});\n      for (const prefixedKey in prefixed) {\n        const prefixedVal = prefixed[prefixedKey];\n        if (\n          typeof prefixedVal === \"string\" ||\n          typeof prefixedVal === \"number\"\n        ) {\n          const prefixedRule = hyphenate(prefixedKey) + \":\" + prefixedVal;\n          if (prefixedRule !== rule) {\n            rules += prefixedRule + \";\";\n          }\n        } else if (Array.isArray(prefixedVal)) {\n          const hyphenated = hyphenate(prefixedKey);\n          for (let i = 0; i < prefixedVal.length; i++) {\n            const prefixedRule = hyphenated + \":\" + prefixedVal[i];\n            if (prefixedRule !== rule) {\n              rules += prefixedRule + \";\";\n            }\n          }\n        }\n      }\n      rules += rule + \";\";\n      continue;\n    }\n\n    if (key[0] === \":\") {\n      classes = [\n        ...classes,\n        ...injectStylePrefixed(value, selector + key, prefix, strict),\n      ];\n      continue;\n    }\n\n    if (key[0] === \"@\") {\n      const nestedRules = injectStylePrefixed(value, selector, prefix, strict);\n      classes = [...classes, key + \"{\" + nestedRules.join(\"\") + \"}\"];\n      continue;\n    }\n\n    classes = [\n      ...classes,\n      key + \"{\" + injectStylePrefixed(value, \"\", prefix, strict).join(\"\") + \"}\",\n    ];\n  }\n\n  // strict mode checks for mixed long/shorthands to keep compatibility with atomic engine\n  if (strict && __DEV__) {\n    const conflicts = validateNoMixedHand(styles);\n    if (conflicts.length) {\n      conflicts.forEach(({shorthand, longhand}) => {\n        const short = JSON.stringify({[shorthand.property]: shorthand.value});\n        const long = JSON.stringify({[longhand.property]: longhand.value});\n        // eslint-disable-next-line no-console\n        console.warn(\n          `Styles \\`${short}\\` and \\`${long}\\` in object yielding class \"${selector}\" may result in unexpected behavior. Mixing shorthand and longhand properties within the same style object is unsupported with atomic rendering.`,\n        );\n      });\n    }\n  }\n\n  // used to handle 'exact' selectors like 'div' or referencing another class name like '.css-abc123:hover'\n  // selector is applied in the parent recursive function call.\n  if (!selector) {\n    return [rules];\n  }\n\n  const result = [];\n  if (rules) {\n    result.push(`.${prefix}css-${selector}{${rules}}`);\n  }\n  return [...result, ...classes];\n}\n","// @flow\n\n/* eslint-disable no-console */\n\nconst validAnimationState = /^(from|to|\\+?(\\d*\\.)?\\d+%)(\\s*,\\s*(from|to|\\+?(\\d*\\.)?\\d+%))*$/;\n\nexport default function validateKeyframesObject(keyframes: Object) {\n  let valid = true;\n  for (const animationState in keyframes) {\n    const value = keyframes[animationState];\n    if (!validAnimationState.test(animationState)) {\n      valid = false;\n      console.warn(\n        `Warning: property \"${animationState}\" in keyframes object ${JSON.stringify(\n          keyframes,\n        )} is not a valid. Must be \"from\", \"to\", or a percentage.`,\n      );\n    }\n    if (typeof value !== \"object\") {\n      valid = false;\n      console.warn(\n        `Warning: value for \"${animationState}\" property in keyframes object ${JSON.stringify(\n          keyframes,\n        )} must be an object. Instead it was a ${typeof value}.`,\n      );\n    }\n    if (!valid) {\n      console.warn(\n        `Warning: object used as value for \"animationName\" style is invalid:`,\n        keyframes,\n      );\n    }\n  }\n}\n","// @flow\n// vendored in from styled-components\n\nconst AD_REPLACER_R = /(a)(d)/gi;\n\n/* This is the \"capacity\" of our alphabet i.e. 2x26 for all letters plus their capitalised\n * counterparts */\nconst charsLength = 52;\n\n/* start at 75 for 'a' until 'z' (25) and then start at 65 for capitalised letters */\nconst getAlphabeticChar = (code: number): string =>\n  String.fromCharCode(code + (code > 25 ? 39 : 97));\n\n/* input a number, usually a hash and convert it to base-52 */\nexport default function generateAlphabeticName(code: number): string {\n  let name = \"\";\n  let x;\n\n  /* get a char and divide by alphabet-length */\n  for (x = Math.abs(code); x > charsLength; x = (x / charsLength) | 0) {\n    name = getAlphabeticChar(x % charsLength) + name;\n  }\n\n  return (getAlphabeticChar(x % charsLength) + name).replace(\n    AD_REPLACER_R,\n    \"$1-$2\",\n  );\n}\n","// @flow\n// vendored in from styled-components\n\nexport const SEED = 5381 | 0;\n\n// When we have separate strings it's useful to run a progressive\n// version of djb2 where we pretend that we're still looping over\n// the same string\nexport const phash = (h: number, x: string): number => {\n  h |= 0;\n  for (let i = 0, l = x.length | 0; i < l; i++) {\n    h = (h << 5) + h + x.charCodeAt(i);\n  }\n\n  return h;\n};\n\n// This is a djb2 hashing function\nexport const hash = (x: string): number => {\n  return phash(SEED, x) >>> 0;\n};\n","// @flow\n\ndeclare var __DEV__: boolean;\n\nimport hyphenate from \"./hyphenate-style-name.js\";\nimport validateKeyframesObject from \"./validate-keyframes-object.js\";\nimport generateAlphabeticName from \"./generate-alphabetic-name\";\nimport {hash} from \"./hash\";\n\nimport type {\n  StyleObject,\n  FontFaceObject,\n  KeyframesObject,\n} from \"styletron-standard\";\n\nexport function hashCssObject(\n  cssObject: StyleObject | FontFaceObject | KeyframesObject,\n): string {\n  return generateAlphabeticName(hash(JSON.stringify(cssObject)));\n}\n\nexport function keyframesToBlock(keyframes: {[string]: Object}): string {\n  if (__DEV__) {\n    validateKeyframesObject(keyframes);\n  }\n  if (__DEV__ && typeof Object.getPrototypeOf(keyframes) !== \"undefined\") {\n    if (Object.getPrototypeOf(keyframes) !== Object.getPrototypeOf({})) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        \"Only plain objects should be used as animation values. Unexpectedly recieved:\",\n        keyframes,\n      );\n    }\n  }\n  let result = \"\";\n  for (const animationState in keyframes) {\n    result += `${animationState}{${declarationsToBlock(\n      keyframes[animationState],\n    )}}`;\n  }\n  return result;\n}\n\nexport function declarationsToBlock(style: Object): string {\n  let css = \"\";\n  for (const prop in style) {\n    const val = style[prop];\n    if (typeof val === \"string\" || typeof val === \"number\") {\n      css += `${hyphenate(prop)}:${val};`;\n    }\n  }\n  // trim trailing semicolon\n  return css.slice(0, -1);\n}\n\nexport function keyframesBlockToRule(id: string, block: string): string {\n  return `@keyframes ${id}{${block}}`;\n}\n\nexport function fontFaceBlockToRule(id: string, block: string): string {\n  return `@font-face{font-family:${id};${block}}`;\n}\n","// @flow\nimport type {StandardEngine} from \"styletron-standard\";\nimport injectStylePrefixed from \"../inject-style-prefixed.js\";\n\nimport type {\n  StyleObject,\n  FontFaceObject,\n  KeyframesObject,\n} from \"styletron-standard\";\n\nimport {\n  keyframesToBlock,\n  keyframesBlockToRule,\n  fontFaceBlockToRule,\n  declarationsToBlock,\n  hashCssObject,\n} from \"../css\";\n\nexport type sheetT = {|\n  css: string,\n  attrs: {[string]: string},\n|};\n\nexport type optionsT = {\n  prefix?: string,\n  strict?: boolean,\n};\n\nexport type cacheT = {\n  [key: string]: string,\n};\n\nclass StyletronServer implements StandardEngine {\n  cache: cacheT;\n  opts: optionsT;\n\n  constructor(opts?: optionsT = {}) {\n    this.opts = opts || {};\n    this.cache = {};\n  }\n\n  renderStyle(styles: StyleObject): string {\n    const className = hashCssObject(styles);\n    if (!this.cache[className]) {\n      this.cache[className] = injectStylePrefixed(\n        styles,\n        className,\n        this.opts.prefix || \"\",\n        Boolean(this.opts.strict),\n      ).join(\"\");\n    }\n    return `${this.opts.prefix || \"\"}css-${className}`;\n  }\n\n  renderFontFace(fontFace: FontFaceObject): string {\n    const fontName = hashCssObject(fontFace);\n    if (!this.cache[fontName]) {\n      this.cache[fontName] = fontFaceBlockToRule(\n        `${this.opts.prefix || \"\"}font-${fontName}`,\n        declarationsToBlock(fontFace),\n      );\n    }\n    return `${this.opts.prefix || \"\"}font-${fontName}`;\n  }\n\n  renderKeyframes(keyframes: KeyframesObject): string {\n    const animationName = hashCssObject(keyframes);\n    if (!this.cache[animationName]) {\n      this.cache[animationName] = keyframesBlockToRule(\n        `${this.opts.prefix || \"\"}animation-${animationName}`,\n        keyframesToBlock(keyframes),\n      );\n    }\n    return `${this.opts.prefix || \"\"}animation-${animationName}`;\n  }\n\n  getStylesheets(): Array<sheetT> {\n    const hashedNames = [...Object.keys(this.cache)];\n    return [\n      {\n        css: this.getCss(),\n        attrs: {\"data-hydrate\": hashedNames.join(\" \")},\n      },\n    ];\n  }\n\n  getStylesheetsHtml(className?: string = \"_styletron_hydrate_\") {\n    return generateHtmlString(this.getStylesheets(), className);\n  }\n\n  getCss() {\n    return [...Object.values(this.cache)].join(\"\");\n  }\n}\n\nexport function generateHtmlString(sheets: Array<sheetT>, className: string) {\n  let html = \"\";\n  for (let i = 0; i < sheets.length; i++) {\n    const sheet = sheets[i];\n    const {class: originalClassName, ...rest} = sheet.attrs;\n    const attrs = {\n      class: originalClassName\n        ? `${className} ${originalClassName}`\n        : className,\n      ...rest,\n    };\n    html += `<style${attrsToString(attrs)}>${sheet.css}</style>`;\n  }\n  return html;\n}\n\nfunction attrsToString(attrs) {\n  let result = \"\";\n  for (const attr in attrs) {\n    const value = attrs[attr];\n    if (value === true) {\n      result += \" \" + attr;\n    } else if (value !== false) {\n      result += ` ${attr}=\"${value}\"`;\n    }\n  }\n  return result;\n}\n\nexport default StyletronServer;\n","// @flow\n\nimport test from \"tape\";\nimport Styletron from \"../server.js\";\n\ntest(\"StyletronServer toCss\", t => {\n  const styletron = new Styletron();\n  t.equal(styletron.getCss(), \"\", \"returns empty string when no styles\");\n  injectFixtureStyles(styletron);\n  t.equal(\n    styletron.getCss(),\n    \".css-gMxcYW{color:red;border:1px solid black;}.css-gMxcYW:hover{color:green;}@media (min-width: 200px){.css-gMxcYW{color:hotpink;}.css-gMxcYW:hover{color:red;}}@media (min-width: 400px){.css-gMxcYW{color:violet;}}@supports (display: grid){div{display:-ms-grid;display:grid;}}.css-eaGfYw{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}\",\n  );\n  injectFixtureStyles(styletron);\n  t.equal(\n    styletron.getCss(),\n    \".css-gMxcYW{color:red;border:1px solid black;}.css-gMxcYW:hover{color:green;}@media (min-width: 200px){.css-gMxcYW{color:hotpink;}.css-gMxcYW:hover{color:red;}}@media (min-width: 400px){.css-gMxcYW{color:violet;}}@supports (display: grid){div{display:-ms-grid;display:grid;}}.css-eaGfYw{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}\",\n  );\n  injectFixtureKeyframes(styletron);\n  t.equal(\n    styletron.getCss(),\n    \".css-gMxcYW{color:red;border:1px solid black;}.css-gMxcYW:hover{color:green;}@media (min-width: 200px){.css-gMxcYW{color:hotpink;}.css-gMxcYW:hover{color:red;}}@media (min-width: 400px){.css-gMxcYW{color:violet;}}@supports (display: grid){div{display:-ms-grid;display:grid;}}.css-eaGfYw{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}@keyframes animation-blGUxF{from{color:purple}50%{color:yellow}to{color:orange}}\",\n  );\n  injectFixtureFontFace(styletron);\n  t.equal(\n    styletron.getCss(),\n    \".css-gMxcYW{color:red;border:1px solid black;}.css-gMxcYW:hover{color:green;}@media (min-width: 200px){.css-gMxcYW{color:hotpink;}.css-gMxcYW:hover{color:red;}}@media (min-width: 400px){.css-gMxcYW{color:violet;}}@supports (display: grid){div{display:-ms-grid;display:grid;}}.css-eaGfYw{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}@keyframes animation-blGUxF{from{color:purple}50%{color:yellow}to{color:orange}}@font-face{font-family:font-WNyjs;src:local('Roboto')}\",\n  );\n  t.end();\n});\n\ntest(\"StyletronServer getStylesheets\", t => {\n  const styletron = new Styletron();\n  t.deepEqual(\n    styletron.getStylesheets(),\n    [{css: \"\", attrs: {\"data-hydrate\": \"\"}}],\n    \"no styles yields array with single empty stylesheet\",\n  );\n  injectFixtureStyles(styletron);\n  t.deepEqual(styletron.getStylesheets(), [\n    {\n      css:\n        \".css-gMxcYW{color:red;border:1px solid black;}.css-gMxcYW:hover{color:green;}@media (min-width: 200px){.css-gMxcYW{color:hotpink;}.css-gMxcYW:hover{color:red;}}@media (min-width: 400px){.css-gMxcYW{color:violet;}}@supports (display: grid){div{display:-ms-grid;display:grid;}}.css-eaGfYw{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}\",\n      attrs: {\"data-hydrate\": \"gMxcYW PKJb ihRfbR eaGfYw\"},\n    },\n  ]);\n  injectFixtureKeyframes(styletron);\n  t.deepEqual(styletron.getStylesheets(), [\n    {\n      css:\n        \".css-gMxcYW{color:red;border:1px solid black;}.css-gMxcYW:hover{color:green;}@media (min-width: 200px){.css-gMxcYW{color:hotpink;}.css-gMxcYW:hover{color:red;}}@media (min-width: 400px){.css-gMxcYW{color:violet;}}@supports (display: grid){div{display:-ms-grid;display:grid;}}.css-eaGfYw{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}@keyframes animation-blGUxF{from{color:purple}50%{color:yellow}to{color:orange}}\",\n      attrs: {\"data-hydrate\": \"gMxcYW PKJb ihRfbR eaGfYw blGUxF\"},\n    },\n  ]);\n  injectFixtureFontFace(styletron);\n  t.deepEqual(styletron.getStylesheets(), [\n    {\n      css:\n        \".css-gMxcYW{color:red;border:1px solid black;}.css-gMxcYW:hover{color:green;}@media (min-width: 200px){.css-gMxcYW{color:hotpink;}.css-gMxcYW:hover{color:red;}}@media (min-width: 400px){.css-gMxcYW{color:violet;}}@supports (display: grid){div{display:-ms-grid;display:grid;}}.css-eaGfYw{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}@keyframes animation-blGUxF{from{color:purple}50%{color:yellow}to{color:orange}}@font-face{font-family:font-WNyjs;src:local('Roboto')}\",\n      attrs: {\n        \"data-hydrate\": \"gMxcYW PKJb ihRfbR eaGfYw blGUxF WNyjs\",\n      },\n    },\n  ]);\n  t.end();\n});\n\ntest(\"StyletronServer getStylesheetsHtml \", t => {\n  const styletron = new Styletron();\n  t.equal(\n    styletron.getStylesheetsHtml(),\n    '<style class=\"_styletron_hydrate_\" data-hydrate=\"\"></style>',\n    \"returns single empty stylesheet when no styles\",\n  );\n  injectFixtureStyles(styletron);\n  t.equal(\n    styletron.getStylesheetsHtml(),\n    '<style class=\"_styletron_hydrate_\" data-hydrate=\"gMxcYW PKJb ihRfbR eaGfYw\">.css-gMxcYW{color:red;border:1px solid black;}.css-gMxcYW:hover{color:green;}@media (min-width: 200px){.css-gMxcYW{color:hotpink;}.css-gMxcYW:hover{color:red;}}@media (min-width: 400px){.css-gMxcYW{color:violet;}}@supports (display: grid){div{display:-ms-grid;display:grid;}}.css-eaGfYw{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style>',\n  );\n  injectFixtureKeyframes(styletron);\n  t.equal(\n    styletron.getStylesheetsHtml(),\n    '<style class=\"_styletron_hydrate_\" data-hydrate=\"gMxcYW PKJb ihRfbR eaGfYw blGUxF\">.css-gMxcYW{color:red;border:1px solid black;}.css-gMxcYW:hover{color:green;}@media (min-width: 200px){.css-gMxcYW{color:hotpink;}.css-gMxcYW:hover{color:red;}}@media (min-width: 400px){.css-gMxcYW{color:violet;}}@supports (display: grid){div{display:-ms-grid;display:grid;}}.css-eaGfYw{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}@keyframes animation-blGUxF{from{color:purple}50%{color:yellow}to{color:orange}}</style>',\n  );\n  injectFixtureFontFace(styletron);\n  t.equal(\n    styletron.getStylesheetsHtml(),\n    '<style class=\"_styletron_hydrate_\" data-hydrate=\"gMxcYW PKJb ihRfbR eaGfYw blGUxF WNyjs\">.css-gMxcYW{color:red;border:1px solid black;}.css-gMxcYW:hover{color:green;}@media (min-width: 200px){.css-gMxcYW{color:hotpink;}.css-gMxcYW:hover{color:red;}}@media (min-width: 400px){.css-gMxcYW{color:violet;}}@supports (display: grid){div{display:-ms-grid;display:grid;}}.css-eaGfYw{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}@keyframes animation-blGUxF{from{color:purple}50%{color:yellow}to{color:orange}}@font-face{font-family:font-WNyjs;src:local(\\'Roboto\\')}</style>',\n  );\n  t.end();\n});\n\ntest(\"StyletronServer prefix option\", t => {\n  const styletron = new Styletron({prefix: \"foo_\"});\n  t.equal(styletron.renderStyle({color: \"red\"}), \"foo_css-jZABor\");\n  t.equal(injectFixtureFontFace(styletron), \"foo_font-WNyjs\");\n  t.equal(injectFixtureKeyframes(styletron), \"foo_animation-blGUxF\");\n  t.deepEqual(styletron.getStylesheets(), [\n    {\n      css:\n        \".foo_css-jZABor{color:red;}@font-face{font-family:foo_font-WNyjs;src:local('Roboto')}@keyframes foo_animation-blGUxF{from{color:purple}50%{color:yellow}to{color:orange}}\",\n      attrs: {\"data-hydrate\": \"jZABor WNyjs blGUxF\"},\n    },\n  ]);\n  t.end();\n});\n\ntest(\"StyletronServer deeply nested rules\", t => {\n  const styletron = new Styletron({});\n  t.equal(\n    styletron.renderStyle({\n      \"@supports (flex-wrap: wrap)\": {\n        \"@media (min-width: 50em)\": {\n          \":hover\": {\n            background: \"blue\",\n          },\n        },\n      },\n    }),\n    \"css-gPyDTX\",\n  );\n  t.deepEqual(styletron.getStylesheets(), [\n    {\n      css:\n        \"@supports (flex-wrap: wrap){@media (min-width: 50em){.css-gPyDTX:hover{background:blue;}}}\",\n      attrs: {\"data-hydrate\": \"gPyDTX\"},\n    },\n  ]);\n  t.end();\n});\n\nfunction injectFixtureStyles(styletron) {\n  styletron.renderStyle({\n    color: \"red\",\n    border: \"1px solid black\",\n    \":hover\": {color: \"green\"},\n    \"@media (min-width: 200px)\": {\n      color: \"hotpink\",\n      \":hover\": {\n        color: \"red\",\n      },\n    },\n    \"@media (min-width: 400px)\": {\n      color: \"violet\",\n    },\n    \"@supports (display: grid)\": {\n      div: {\n        display: \"grid\",\n      },\n    },\n  });\n  styletron.renderStyle({\n    zIndex: void 0, // Should be silently ignored\n  });\n  styletron.renderStyle({\n    // null values were historically supported (albeit erronesouly)\n    opacity: null, // Should be silently ignored\n  });\n  styletron.renderStyle({\n    userSelect: \"none\",\n  });\n}\n\nfunction injectFixtureKeyframes(styletron) {\n  return styletron.renderKeyframes({\n    from: {\n      color: \"purple\",\n    },\n    \"50%\": {\n      color: \"yellow\",\n    },\n    to: {\n      color: \"orange\",\n    },\n  });\n}\n\nfunction injectFixtureFontFace(styletron) {\n  return styletron.renderFontFace({\n    src: \"local('Roboto')\",\n  });\n}\n"],"names":["uppercasePattern","msPattern","cache","hyphenateStyleName","prop","replace","toLowerCase","shorthandMap","validateNoMixedHand","style","hyphenatedProperties","Object","keys","reduce","acc","property","hyphenate","mixed","longhand","long","short","push","injectStylePrefixed","styles","selector","prefix","strict","rules","classes","key","value","Array","isArray","Error","JSON","stringify","rule","prefixed","prefixRule","prefixedKey","prefixedVal","prefixedRule","hyphenated","i","length","nestedRules","join","conflicts","forEach","shorthand","warn","result","validAnimationState","validateKeyframesObject","keyframes","valid","animationState","test","AD_REPLACER_R","charsLength","getAlphabeticChar","code","fromCharCode","generateAlphabeticName","name","x","Math","abs","SEED","phash","h","l","charCodeAt","hash","hashCssObject","cssObject","keyframesToBlock","getPrototypeOf","declarationsToBlock","css","val","slice","keyframesBlockToRule","id","block","fontFaceBlockToRule","StyletronServer","opts","className","Boolean","fontFace","fontName","animationName","hashedNames","getCss","generateHtmlString","getStylesheets","values","sheets","html","sheet","attrs","originalClassName","rest","attrsToString","attr","t","styletron","Styletron","equal","end","deepEqual","getStylesheetsHtml","renderStyle","injectFixtureFontFace","injectFixtureKeyframes","injectFixtureStyles","renderKeyframes","renderFontFace"],"mappings":"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"}