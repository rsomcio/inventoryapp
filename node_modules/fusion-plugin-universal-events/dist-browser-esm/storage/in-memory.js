import { split } from './split';
class InMemoryBatchStorage {
  data = [];
  add = (...toBeAdded) => {
    this.data.push(...toBeAdded);
  };
  addToStart = (...toBeAdded) => {
    this.data.unshift(...toBeAdded);
  };
  getAndClear = (limit = Infinity) => {
    const allEvents = this.data;
    const [eventsToSend, eventsToStore] = split(allEvents, limit);
    this.data = eventsToStore;
    return eventsToSend;
  };
}
export const inMemoryBatchStorage = new InMemoryBatchStorage();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzcGxpdCIsIkluTWVtb3J5QmF0Y2hTdG9yYWdlIiwiZGF0YSIsImFkZCIsInRvQmVBZGRlZCIsInB1c2giLCJhZGRUb1N0YXJ0IiwidW5zaGlmdCIsImdldEFuZENsZWFyIiwibGltaXQiLCJJbmZpbml0eSIsImFsbEV2ZW50cyIsImV2ZW50c1RvU2VuZCIsImV2ZW50c1RvU3RvcmUiLCJpbk1lbW9yeUJhdGNoU3RvcmFnZSJdLCJzb3VyY2VzIjpbInNyYy9zdG9yYWdlL2luLW1lbW9yeS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7QmF0Y2hTdG9yYWdlLCBCYXRjaFR5cGV9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7c3BsaXR9IGZyb20gJy4vc3BsaXQnO1xuXG5jbGFzcyBJbk1lbW9yeUJhdGNoU3RvcmFnZSBpbXBsZW1lbnRzIEJhdGNoU3RvcmFnZSB7XG4gIGRhdGE6IEJhdGNoVHlwZVtdID0gW107XG5cbiAgYWRkID0gKC4uLnRvQmVBZGRlZDogQmF0Y2hUeXBlW10pID0+IHtcbiAgICB0aGlzLmRhdGEucHVzaCguLi50b0JlQWRkZWQpO1xuICB9O1xuXG4gIGFkZFRvU3RhcnQgPSAoLi4udG9CZUFkZGVkOiBCYXRjaFR5cGVbXSkgPT4ge1xuICAgIHRoaXMuZGF0YS51bnNoaWZ0KC4uLnRvQmVBZGRlZCk7XG4gIH07XG5cbiAgZ2V0QW5kQ2xlYXIgPSAobGltaXQ6IG51bWJlciA9IEluZmluaXR5KTogQmF0Y2hUeXBlW10gPT4ge1xuICAgIGNvbnN0IGFsbEV2ZW50cyA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBbZXZlbnRzVG9TZW5kLCBldmVudHNUb1N0b3JlXSA9IHNwbGl0KGFsbEV2ZW50cywgbGltaXQpO1xuICAgIHRoaXMuZGF0YSA9IGV2ZW50c1RvU3RvcmU7XG4gICAgcmV0dXJuIGV2ZW50c1RvU2VuZDtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IGluTWVtb3J5QmF0Y2hTdG9yYWdlID0gbmV3IEluTWVtb3J5QmF0Y2hTdG9yYWdlKCk7XG4iXSwibWFwcGluZ3MiOiJBQUNBLFNBQVFBLEtBQUssUUFBTyxTQUFTO0FBRTdCLE1BQU1DLG9CQUFvQixDQUF5QjtFQUNqREMsSUFBSSxHQUFnQixFQUFFO0VBRXRCQyxHQUFHLEdBQUcsQ0FBQyxHQUFHQyxTQUFzQixLQUFLO0lBQ25DLElBQUksQ0FBQ0YsSUFBSSxDQUFDRyxJQUFJLENBQUMsR0FBR0QsU0FBUyxDQUFDO0VBQzlCLENBQUM7RUFFREUsVUFBVSxHQUFHLENBQUMsR0FBR0YsU0FBc0IsS0FBSztJQUMxQyxJQUFJLENBQUNGLElBQUksQ0FBQ0ssT0FBTyxDQUFDLEdBQUdILFNBQVMsQ0FBQztFQUNqQyxDQUFDO0VBRURJLFdBQVcsR0FBRyxDQUFDQyxLQUFhLEdBQUdDLFFBQVEsS0FBa0I7SUFDdkQsTUFBTUMsU0FBUyxHQUFHLElBQUksQ0FBQ1QsSUFBSTtJQUMzQixNQUFNLENBQUNVLFlBQVksRUFBRUMsYUFBYSxDQUFDLEdBQUdiLEtBQUssQ0FBQ1csU0FBUyxFQUFFRixLQUFLLENBQUM7SUFDN0QsSUFBSSxDQUFDUCxJQUFJLEdBQUdXLGFBQWE7SUFDekIsT0FBT0QsWUFBWTtFQUNyQixDQUFDO0FBQ0g7QUFFQSxPQUFPLE1BQU1FLG9CQUFvQixHQUFHLElBQUliLG9CQUFvQixFQUFFIn0=