"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.inMemoryBatchStorage = void 0;
var _split = require("./split");
class InMemoryBatchStorage {
  data = [];
  add = (...toBeAdded) => {
    this.data.push(...toBeAdded);
  };
  addToStart = (...toBeAdded) => {
    this.data.unshift(...toBeAdded);
  };
  getAndClear = (limit = Infinity) => {
    const allEvents = this.data;
    const [eventsToSend, eventsToStore] = (0, _split.split)(allEvents, limit);
    this.data = eventsToStore;
    return eventsToSend;
  };
}
const inMemoryBatchStorage = new InMemoryBatchStorage();
exports.inMemoryBatchStorage = inMemoryBatchStorage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJbk1lbW9yeUJhdGNoU3RvcmFnZSIsImRhdGEiLCJhZGQiLCJ0b0JlQWRkZWQiLCJwdXNoIiwiYWRkVG9TdGFydCIsInVuc2hpZnQiLCJnZXRBbmRDbGVhciIsImxpbWl0IiwiSW5maW5pdHkiLCJhbGxFdmVudHMiLCJldmVudHNUb1NlbmQiLCJldmVudHNUb1N0b3JlIiwic3BsaXQiLCJpbk1lbW9yeUJhdGNoU3RvcmFnZSJdLCJzb3VyY2VzIjpbInNyYy9zdG9yYWdlL2luLW1lbW9yeS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7QmF0Y2hTdG9yYWdlLCBCYXRjaFR5cGV9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7c3BsaXR9IGZyb20gJy4vc3BsaXQnO1xuXG5jbGFzcyBJbk1lbW9yeUJhdGNoU3RvcmFnZSBpbXBsZW1lbnRzIEJhdGNoU3RvcmFnZSB7XG4gIGRhdGE6IEJhdGNoVHlwZVtdID0gW107XG5cbiAgYWRkID0gKC4uLnRvQmVBZGRlZDogQmF0Y2hUeXBlW10pID0+IHtcbiAgICB0aGlzLmRhdGEucHVzaCguLi50b0JlQWRkZWQpO1xuICB9O1xuXG4gIGFkZFRvU3RhcnQgPSAoLi4udG9CZUFkZGVkOiBCYXRjaFR5cGVbXSkgPT4ge1xuICAgIHRoaXMuZGF0YS51bnNoaWZ0KC4uLnRvQmVBZGRlZCk7XG4gIH07XG5cbiAgZ2V0QW5kQ2xlYXIgPSAobGltaXQ6IG51bWJlciA9IEluZmluaXR5KTogQmF0Y2hUeXBlW10gPT4ge1xuICAgIGNvbnN0IGFsbEV2ZW50cyA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBbZXZlbnRzVG9TZW5kLCBldmVudHNUb1N0b3JlXSA9IHNwbGl0KGFsbEV2ZW50cywgbGltaXQpO1xuICAgIHRoaXMuZGF0YSA9IGV2ZW50c1RvU3RvcmU7XG4gICAgcmV0dXJuIGV2ZW50c1RvU2VuZDtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IGluTWVtb3J5QmF0Y2hTdG9yYWdlID0gbmV3IEluTWVtb3J5QmF0Y2hTdG9yYWdlKCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBO0FBRUEsTUFBTUEsb0JBQW9CLENBQXlCO0VBQ2pEQyxJQUFJLEdBQWdCLEVBQUU7RUFFdEJDLEdBQUcsR0FBRyxDQUFDLEdBQUdDLFNBQXNCLEtBQUs7SUFDbkMsSUFBSSxDQUFDRixJQUFJLENBQUNHLElBQUksQ0FBQyxHQUFHRCxTQUFTLENBQUM7RUFDOUIsQ0FBQztFQUVERSxVQUFVLEdBQUcsQ0FBQyxHQUFHRixTQUFzQixLQUFLO0lBQzFDLElBQUksQ0FBQ0YsSUFBSSxDQUFDSyxPQUFPLENBQUMsR0FBR0gsU0FBUyxDQUFDO0VBQ2pDLENBQUM7RUFFREksV0FBVyxHQUFHLENBQUNDLEtBQWEsR0FBR0MsUUFBUSxLQUFrQjtJQUN2RCxNQUFNQyxTQUFTLEdBQUcsSUFBSSxDQUFDVCxJQUFJO0lBQzNCLE1BQU0sQ0FBQ1UsWUFBWSxFQUFFQyxhQUFhLENBQUMsR0FBRyxJQUFBQyxZQUFLLEVBQUNILFNBQVMsRUFBRUYsS0FBSyxDQUFDO0lBQzdELElBQUksQ0FBQ1AsSUFBSSxHQUFHVyxhQUFhO0lBQ3pCLE9BQU9ELFlBQVk7RUFDckIsQ0FBQztBQUNIO0FBRU8sTUFBTUcsb0JBQW9CLEdBQUcsSUFBSWQsb0JBQW9CLEVBQUU7QUFBQyJ9