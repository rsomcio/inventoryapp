"use strict";

require("whatwg-fetch");
var _fusionCore = _interopRequireDefault(require("fusion-core"));
var _fusionTokens = require("fusion-tokens");
var _fusionTestUtils = require("fusion-test-utils");
var _browser = _interopRequireWildcard(require("../browser"));
var _index = require("../index");
var _index2 = require("../storage/index");
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
/** Copyright (c) 2018 Uber Technologies, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */

/* eslint-env browser */

// Needed for Response global

// Set document.visibilityState to test flushBeforeTerminated
Object.defineProperty(document, 'visibilityState', {
  value: 'hidden'
});
const visibilitychangeEvent = new Event('visibilitychange');

/* Test helpers */
function getApp(fetch) {
  const app = new _fusionCore.default('el', el => el);
  app.register(_fusionTokens.FetchToken, fetch);
  _index2.inMemoryBatchStorage.getAndClear();
  app.register(_index2.UniversalEventsBatchStorageToken, _index2.inMemoryBatchStorage);
  app.register(_index.UniversalEventsToken, _browser.default);
  return app;
}
function createMockFetch(responseParams) {
  const mockResponse = new Response();
  // $FlowFixMe
  return {
    ...mockResponse,
    ...responseParams
  };
}
test('Browser EventEmitter', async () => {
  let fetched = false;
  let emitted = false;
  navigator.sendBeacon = jest.fn((url, payload) => {
    if (!payload) {
      throw new Error(`Expected payload to exist`);
    }
    expect(url).toBe('/_events');
    const jsonBody = JSON.parse(payload.toString());
    expect(jsonBody.items.length).toBe(1);
    expect(jsonBody.items[0].payload.x).toBe(1);
    fetched = true;
    return true;
  });
  const fetch = jest.fn();
  const app = getApp(fetch);
  app.middleware({
    events: _index.UniversalEventsToken
  }, ({
    events
  }) => {
    return (ctx, next) => {
      const emitter = events.from(ctx);
      expect(emitter).toBe(events);
      emitter.on('a', ({
        x
      }) => {
        expect(x).toBe(1);
        emitted = true;
      });
      emitter.emit('a', {
        x: 1
      });
      window.dispatchEvent(visibilitychangeEvent);
      emitter.teardown();
      return next();
    };
  });
  const simulator = (0, _fusionTestUtils.getSimulator)(app);
  await simulator.render('/');
  expect(navigator.sendBeacon).toHaveBeenCalled();
  expect(fetch).not.toHaveBeenCalled();
  expect(emitted).toBe(true);
  expect(fetched).toBe(true);
  expect(_index2.inMemoryBatchStorage.data.length).toBe(0);
});
test('Browser EventEmitter should append routePrefix if sendBeacon API is used', async () => {
  window.__ROUTE_PREFIX__ = '/routePrefix';
  navigator.sendBeacon = jest.fn((url, payload) => {
    expect(url).toBe('/routePrefix/_events');
    return true;
  });
  const fetch = jest.fn();
  const app = getApp(fetch);
  app.middleware({
    events: _index.UniversalEventsToken
  }, ({
    events
  }) => {
    return (ctx, next) => {
      const emitter = events.from(ctx);
      expect(emitter).toBe(events);
      emitter.emit('a', {
        x: 1
      });
      window.dispatchEvent(visibilitychangeEvent);
      emitter.teardown();
      return next();
    };
  });
  const simulator = (0, _fusionTestUtils.getSimulator)(app);
  await simulator.render('/');
  delete window.__ROUTE_PREFIX__;
});
test('Browser EventEmitter should not routePrefix if fetch API is used since it is appended in csrf plugin', async () => {
  window.__ROUTE_PREFIX__ = '/routePrefix';
  navigator.sendBeacon = undefined;
  const fetch = jest.fn();
  const app = getApp(fetch);
  app.middleware({
    events: _index.UniversalEventsToken
  }, ({
    events
  }) => {
    return (ctx, next) => {
      const emitter = events.from(ctx);
      expect(emitter).toBe(events);
      emitter.emit('a', {
        x: 1
      });
      window.dispatchEvent(visibilitychangeEvent);
      emitter.teardown();
      return next();
    };
  });
  const simulator = (0, _fusionTestUtils.getSimulator)(app);
  await simulator.render('/');
  expect(fetch).toHaveBeenCalledWith('/_events', expect.anything());
  delete window.__ROUTE_PREFIX__;
});
test('Browser EventEmitter - should fall back to fetch if sendBeacon is not supported', async () => {
  let fetched = false;
  let emitted = false;
  navigator.sendBeacon = undefined;
  const fetch = jest.fn((url, options) => {
    if (!options || !options.method || !options.headers || !options.body || typeof options.body !== 'string') {
      throw new Error(`Expected method, headers, body from options are populated`);
    }
    let {
      method,
      headers,
      body
    } = options;
    expect(url).toBe('/_events');
    expect(method).toBe('POST');
    expect(
    // $FlowFixMe
    headers['Content-Type']).toBe('application/json');
    const jsonBody = JSON.parse(body);
    expect(jsonBody.items.length).toBe(1);
    expect(jsonBody.items[0].payload.x).toBe(1);
    fetched = true;
    return Promise.resolve(createMockFetch());
  });
  const app = getApp(fetch);
  app.middleware({
    events: _index.UniversalEventsToken
  }, ({
    events
  }) => {
    return (ctx, next) => {
      const emitter = events.from(ctx);
      expect(emitter).toBe(events);
      emitter.on('a', ({
        x
      }) => {
        expect(x).toBe(1);
        emitted = true;
      });
      emitter.emit('a', {
        x: 1
      });
      window.dispatchEvent(visibilitychangeEvent);
      emitter.teardown();
      return next();
    };
  });
  const simulator = (0, _fusionTestUtils.getSimulator)(app);
  await simulator.render('/');
  expect(fetch).toHaveBeenCalled();
  expect(emitted).toBe(true);
  expect(fetched).toBe(true);
  expect(_index2.inMemoryBatchStorage.data.length).toBe(0);
});
test('Browser EventEmitter - should fall back to fetch if beacon fails to enqueue', async () => {
  navigator.sendBeacon = jest.fn(() => false);
  const fetch = jest.fn(() => Promise.resolve(createMockFetch({
    ok: true
  })));
  const app = getApp(fetch);
  app.middleware({
    events: _index.UniversalEventsToken
  }, ({
    events
  }) => {
    return (ctx, next) => {
      const emitter = events.from(ctx);
      expect(emitter).toBe(events);
      emitter.emit('a', {
        x: 1
      });
      window.dispatchEvent(visibilitychangeEvent);
      emitter.teardown();
      return next();
    };
  });
  const simulator = (0, _fusionTestUtils.getSimulator)(app);
  await simulator.render('/');
  expect(navigator.sendBeacon).toHaveBeenCalled();
  expect(fetch).toHaveBeenCalled();
  expect(_index2.inMemoryBatchStorage.data.length).toBe(0);
});
test('Browser EventEmitter - should not send all the events if beacon is too big', async () => {
  navigator.sendBeacon = jest.fn(() => true);
  const fetch = jest.fn(() => Promise.resolve(createMockFetch()));
  const app = getApp(fetch);
  app.middleware({
    events: _index.UniversalEventsToken
  }, ({
    events
  }) => {
    return (ctx, next) => {
      const emitter = events.from(ctx);
      expect(emitter).toBe(events);
      emitter.emit('a', {
        x: 'a'.repeat(40000)
      });
      emitter.emit('b', {
        x: 'b'.repeat(40000)
      });
      window.dispatchEvent(visibilitychangeEvent);
      emitter.teardown();
      return next();
    };
  });
  const simulator = (0, _fusionTestUtils.getSimulator)(app);
  await simulator.render('/');
  expect(navigator.sendBeacon).toHaveBeenCalled();
  expect(_index2.inMemoryBatchStorage.data.length).toBe(1);
});
test('Browser EventEmitter - should use fetch if single event is larger than beacon limit', async () => {
  navigator.sendBeacon = jest.fn(() => true);
  const fetch = jest.fn(() => Promise.resolve(createMockFetch()));
  const app = getApp(fetch);
  app.middleware({
    events: _index.UniversalEventsToken
  }, ({
    events
  }) => {
    return (ctx, next) => {
      const emitter = events.from(ctx);
      expect(emitter).toBe(events);
      emitter.emit('a', {
        x: 'a'.repeat(100000)
      });
      window.dispatchEvent(visibilitychangeEvent);
      emitter.teardown();
      return next();
    };
  });
  const simulator = (0, _fusionTestUtils.getSimulator)(app);
  await simulator.render('/');
  expect(fetch).toHaveBeenCalled();
  expect(_index2.inMemoryBatchStorage.data.length).toBe(0);
});
test('Browser EventEmitter - fetch adds events back to queue if they fail to send', async () => {
  navigator.sendBeacon = undefined;
  const fetch = () => Promise.resolve(createMockFetch({
    ok: false
  }));
  const app = getApp(fetch);
  app.middleware({
    events: _index.UniversalEventsToken
  }, ({
    events
  }) => {
    return (ctx, next) => {
      const emitter = events.from(ctx);
      expect(emitter).toBe(events);
      emitter.emit('a', {
        x: 1
      });
      window.dispatchEvent(visibilitychangeEvent);
      emitter.teardown();
      return next();
    };
  });
  const simulator = (0, _fusionTestUtils.getSimulator)(app);
  await simulator.render('/');
  expect(_index2.inMemoryBatchStorage.data.length).toBe(1);
});
test('Browser EventEmitter - fetch adds events back to queue if they fail to send 2', async () => {
  navigator.sendBeacon = undefined;
  const fetch = () => Promise.reject();
  const app = getApp(fetch);
  app.middleware({
    events: _index.UniversalEventsToken
  }, ({
    events
  }) => {
    return (ctx, next) => {
      const emitter = events.from(ctx);
      expect(emitter).toBe(events);
      emitter.emit('a', {
        x: 1
      });
      window.dispatchEvent(visibilitychangeEvent);
      emitter.teardown();
      return next();
    };
  });
  const simulator = (0, _fusionTestUtils.getSimulator)(app);
  await simulator.render('/');
  expect(_index2.inMemoryBatchStorage.data.length).toBe(1);
});
test('Browser EventEmitter interval', done => {
  navigator.sendBeacon = jest.fn(() => true);
  _index2.inMemoryBatchStorage.getAndClear();
  const emitter = new _browser.UniversalEmitter(() => {
    return Promise.resolve(createMockFetch());
  }, {
    add() {},
    addToStart() {},
    getAndClear() {
      expect('Calls storage getAndClear on interval').toBeTruthy();
      emitter.teardown();
      done();
      return [];
    }
  }, 1);
});
test('Respects the limit when flushing', async () => {
  navigator.sendBeacon = jest.fn(() => true);
  _index2.inMemoryBatchStorage.getAndClear();
  const fetch = () => Promise.resolve(createMockFetch());
  const emitter = new _browser.UniversalEmitter(fetch, _index2.inMemoryBatchStorage, 2000, 20);
  for (let index = 0; index < 50; index++) {
    emitter.emit('a', {
      x: 1
    });
  }
  await emitter.flush();
  expect(_index2.inMemoryBatchStorage.data.length).toBe(30);
  await emitter.flush();
  expect(_index2.inMemoryBatchStorage.data.length).toBe(10);
  await emitter.flush();
  expect(_index2.inMemoryBatchStorage.data.length).toBe(0);
  emitter.teardown();
});
test('Calling flush even no items works as expected', async () => {
  navigator.sendBeacon = jest.fn(() => true);
  _index2.inMemoryBatchStorage.getAndClear();
  const fetch = () => Promise.resolve(createMockFetch());
  const emitter = new _browser.UniversalEmitter(fetch, _index2.inMemoryBatchStorage, 100, 20);
  await emitter.flush();
  await emitter.flush();
  await new Promise(resolve => setTimeout(resolve, 3000));
  for (let index = 0; index < 20; index++) {
    emitter.emit('a', {
      x: 1
    });
  }
  await emitter.flush();
  expect(_index2.inMemoryBatchStorage.data.length).toBe(0);
  emitter.teardown();
});
test('Fetch lowers limit for 413 errors', async () => {
  navigator.sendBeacon = undefined;
  _index2.inMemoryBatchStorage.getAndClear();
  const fetch = () => Promise.resolve(createMockFetch({
    status: 413,
    ok: false
  }));
  const emitter = new _browser.UniversalEmitter(fetch, _index2.inMemoryBatchStorage, 2000, 20);
  emitter.emit('a', {
    x: 1
  });
  await emitter.flush();
  expect(_index2.inMemoryBatchStorage.data.length).toBe(1);
  expect(emitter.limit).toBe(10);
  await emitter.flush();
  expect(emitter.limit).toBe(5);
  await emitter.flush();
  emitter.teardown();
});
const sleep = ms => setTimeout(() => {}, ms);
test('Browser EventEmitter does not start a new flush while another one is in progress', async () => {
  navigator.sendBeacon = undefined;
  _index2.inMemoryBatchStorage.getAndClear();
  let resolveFetch = () => {};
  const fetch = jest.fn().mockReturnValue(new Promise(resolve => {
    resolveFetch = resolve;
  }));
  const emitter = new _browser.UniversalEmitter(fetch, _index2.inMemoryBatchStorage, 2000, 20);
  emitter.emit('a', {
    x: 1
  });
  emitter.flush();
  emitter.emit('b', {
    y: 1
  });
  emitter.flush();
  emitter.flush();
  // first request is not resolved, only one request at the moment
  expect(fetch).toBeCalledTimes(1);
  resolveFetch(createMockFetch());
  await sleep(1);
  // scheduled flush should be started after first request/flush is resolved
  expect(fetch).toBeCalledTimes(2);
  resolveFetch(createMockFetch());
  await sleep(1);
  // no more additional flush is needed as far as no events were emitted
  expect(fetch).toBeCalledTimes(2);
  emitter.teardown();
});
test('Browser EventEmitter - should not send payloads larger than xhr body limit', async () => {
  const fetch = jest.fn(() => Promise.resolve(createMockFetch()));
  const app = getApp(fetch);
  app.middleware({
    events: _index.UniversalEventsToken
  }, ({
    events
  }) => {
    return (ctx, next) => {
      const emitter = events.from(ctx);
      expect(emitter).toBe(events);
      // emit 5 events that are each slighly under half the max payload limit
      emitter.emit('a', {
        x: 'a'.repeat(1048576 / 2 - 100)
      });
      emitter.emit('b', {
        x: 'b'.repeat(1048576 / 2 - 100)
      });
      emitter.emit('c', {
        x: 'c'.repeat(1048576 / 2 - 100)
      });
      emitter.emit('d', {
        x: 'e'.repeat(1048576 / 2 - 100)
      });
      emitter.emit('e', {
        x: 'e'.repeat(1048576 / 2 - 100)
      });
      window.dispatchEvent(visibilitychangeEvent);
      emitter.teardown();
      return next();
    };
  });
  const simulator = (0, _fusionTestUtils.getSimulator)(app);
  await simulator.render('/');
  expect(_index2.inMemoryBatchStorage.data.length).toBe(3);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImRvY3VtZW50IiwidmFsdWUiLCJ2aXNpYmlsaXR5Y2hhbmdlRXZlbnQiLCJFdmVudCIsImdldEFwcCIsImZldGNoIiwiYXBwIiwiQXBwIiwiZWwiLCJyZWdpc3RlciIsIkZldGNoVG9rZW4iLCJzdG9yZSIsImdldEFuZENsZWFyIiwiVW5pdmVyc2FsRXZlbnRzQmF0Y2hTdG9yYWdlVG9rZW4iLCJVbml2ZXJzYWxFdmVudHNUb2tlbiIsInBsdWdpbiIsImNyZWF0ZU1vY2tGZXRjaCIsInJlc3BvbnNlUGFyYW1zIiwibW9ja1Jlc3BvbnNlIiwiUmVzcG9uc2UiLCJ0ZXN0IiwiZmV0Y2hlZCIsImVtaXR0ZWQiLCJuYXZpZ2F0b3IiLCJzZW5kQmVhY29uIiwiamVzdCIsImZuIiwidXJsIiwicGF5bG9hZCIsIkVycm9yIiwiZXhwZWN0IiwidG9CZSIsImpzb25Cb2R5IiwiSlNPTiIsInBhcnNlIiwidG9TdHJpbmciLCJpdGVtcyIsImxlbmd0aCIsIngiLCJtaWRkbGV3YXJlIiwiZXZlbnRzIiwiY3R4IiwibmV4dCIsImVtaXR0ZXIiLCJmcm9tIiwib24iLCJlbWl0Iiwid2luZG93IiwiZGlzcGF0Y2hFdmVudCIsInRlYXJkb3duIiwic2ltdWxhdG9yIiwiZ2V0U2ltdWxhdG9yIiwicmVuZGVyIiwidG9IYXZlQmVlbkNhbGxlZCIsIm5vdCIsImRhdGEiLCJfX1JPVVRFX1BSRUZJWF9fIiwidW5kZWZpbmVkIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJhbnl0aGluZyIsIm9wdGlvbnMiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIlByb21pc2UiLCJyZXNvbHZlIiwib2siLCJyZXBlYXQiLCJyZWplY3QiLCJkb25lIiwiVW5pdmVyc2FsRW1pdHRlciIsImFkZCIsImFkZFRvU3RhcnQiLCJ0b0JlVHJ1dGh5IiwiaW5kZXgiLCJmbHVzaCIsInNldFRpbWVvdXQiLCJzdGF0dXMiLCJsaW1pdCIsInNsZWVwIiwibXMiLCJyZXNvbHZlRmV0Y2giLCJtb2NrUmV0dXJuVmFsdWUiLCJ5IiwidG9CZUNhbGxlZFRpbWVzIl0sInNvdXJjZXMiOlsic3JjL19fdGVzdHNfXy90ZXN0LmJyb3dzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqIENvcHlyaWdodCAoYykgMjAxOCBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG4vKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cblxuaW1wb3J0ICd3aGF0d2ctZmV0Y2gnOyAvLyBOZWVkZWQgZm9yIFJlc3BvbnNlIGdsb2JhbFxuXG5pbXBvcnQgQXBwIGZyb20gJ2Z1c2lvbi1jb3JlJztcbmltcG9ydCB7RmV0Y2hUb2tlbn0gZnJvbSAnZnVzaW9uLXRva2Vucyc7XG5pbXBvcnQgdHlwZSB7RmV0Y2h9IGZyb20gJ2Z1c2lvbi10b2tlbnMnO1xuaW1wb3J0IHtnZXRTaW11bGF0b3J9IGZyb20gJ2Z1c2lvbi10ZXN0LXV0aWxzJztcblxuaW1wb3J0IHBsdWdpbiwge1VuaXZlcnNhbEVtaXR0ZXJ9IGZyb20gJy4uL2Jyb3dzZXInO1xuaW1wb3J0IHtVbml2ZXJzYWxFdmVudHNUb2tlbn0gZnJvbSAnLi4vaW5kZXgnO1xuaW1wb3J0IHtcbiAgVW5pdmVyc2FsRXZlbnRzQmF0Y2hTdG9yYWdlVG9rZW4sXG4gIGluTWVtb3J5QmF0Y2hTdG9yYWdlIGFzIHN0b3JlLFxufSBmcm9tICcuLi9zdG9yYWdlL2luZGV4JztcblxuLy8gU2V0IGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSB0byB0ZXN0IGZsdXNoQmVmb3JlVGVybWluYXRlZFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCAndmlzaWJpbGl0eVN0YXRlJywge3ZhbHVlOiAnaGlkZGVuJ30pO1xuY29uc3QgdmlzaWJpbGl0eWNoYW5nZUV2ZW50ID0gbmV3IEV2ZW50KCd2aXNpYmlsaXR5Y2hhbmdlJyk7XG5cbi8qIFRlc3QgaGVscGVycyAqL1xuZnVuY3Rpb24gZ2V0QXBwKGZldGNoOiBGZXRjaCkge1xuICBjb25zdCBhcHAgPSBuZXcgQXBwKCdlbCcsIChlbCkgPT4gZWwpO1xuICBhcHAucmVnaXN0ZXIoRmV0Y2hUb2tlbiwgZmV0Y2gpO1xuICBzdG9yZS5nZXRBbmRDbGVhcigpO1xuICBhcHAucmVnaXN0ZXIoVW5pdmVyc2FsRXZlbnRzQmF0Y2hTdG9yYWdlVG9rZW4sIHN0b3JlKTtcbiAgYXBwLnJlZ2lzdGVyKFVuaXZlcnNhbEV2ZW50c1Rva2VuLCBwbHVnaW4pO1xuICByZXR1cm4gYXBwO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVNb2NrRmV0Y2gocmVzcG9uc2VQYXJhbXM/OiBhbnkpOiBSZXNwb25zZSB7XG4gIGNvbnN0IG1vY2tSZXNwb25zZSA9IG5ldyBSZXNwb25zZSgpO1xuICAvLyAkRmxvd0ZpeE1lXG4gIHJldHVybiB7XG4gICAgLi4ubW9ja1Jlc3BvbnNlLFxuICAgIC4uLnJlc3BvbnNlUGFyYW1zLFxuICB9O1xufVxuXG50ZXN0KCdCcm93c2VyIEV2ZW50RW1pdHRlcicsIGFzeW5jICgpID0+IHtcbiAgbGV0IGZldGNoZWQgPSBmYWxzZTtcbiAgbGV0IGVtaXR0ZWQgPSBmYWxzZTtcbiAgbmF2aWdhdG9yLnNlbmRCZWFjb24gPSBqZXN0LmZuKCh1cmwsIHBheWxvYWQpID0+IHtcbiAgICBpZiAoIXBheWxvYWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgcGF5bG9hZCB0byBleGlzdGApO1xuICAgIH1cblxuICAgIGV4cGVjdCh1cmwpLnRvQmUoJy9fZXZlbnRzJyk7XG4gICAgY29uc3QganNvbkJvZHkgPSBKU09OLnBhcnNlKHBheWxvYWQudG9TdHJpbmcoKSk7XG4gICAgZXhwZWN0KGpzb25Cb2R5Lml0ZW1zLmxlbmd0aCkudG9CZSgxKTtcbiAgICBleHBlY3QoanNvbkJvZHkuaXRlbXNbMF0ucGF5bG9hZC54KS50b0JlKDEpO1xuICAgIGZldGNoZWQgPSB0cnVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9KTtcbiAgY29uc3QgZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbiAgY29uc3QgYXBwID0gZ2V0QXBwKGZldGNoKTtcbiAgYXBwLm1pZGRsZXdhcmUoe2V2ZW50czogVW5pdmVyc2FsRXZlbnRzVG9rZW59LCAoe2V2ZW50c30pID0+IHtcbiAgICByZXR1cm4gKGN0eCwgbmV4dCkgPT4ge1xuICAgICAgY29uc3QgZW1pdHRlciA9IGV2ZW50cy5mcm9tKGN0eCk7XG4gICAgICBleHBlY3QoZW1pdHRlcikudG9CZShldmVudHMpO1xuICAgICAgZW1pdHRlci5vbignYScsICh7eH0pID0+IHtcbiAgICAgICAgZXhwZWN0KHgpLnRvQmUoMSk7XG4gICAgICAgIGVtaXR0ZWQgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgICBlbWl0dGVyLmVtaXQoJ2EnLCB7eDogMX0pO1xuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQodmlzaWJpbGl0eWNoYW5nZUV2ZW50KTtcbiAgICAgIGVtaXR0ZXIudGVhcmRvd24oKTtcbiAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfTtcbiAgfSk7XG4gIGNvbnN0IHNpbXVsYXRvciA9IGdldFNpbXVsYXRvcihhcHApO1xuICBhd2FpdCBzaW11bGF0b3IucmVuZGVyKCcvJyk7XG5cbiAgZXhwZWN0KG5hdmlnYXRvci5zZW5kQmVhY29uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIGV4cGVjdChmZXRjaCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgZXhwZWN0KGVtaXR0ZWQpLnRvQmUodHJ1ZSk7XG4gIGV4cGVjdChmZXRjaGVkKS50b0JlKHRydWUpO1xuICBleHBlY3Qoc3RvcmUuZGF0YS5sZW5ndGgpLnRvQmUoMCk7XG59KTtcblxudGVzdCgnQnJvd3NlciBFdmVudEVtaXR0ZXIgc2hvdWxkIGFwcGVuZCByb3V0ZVByZWZpeCBpZiBzZW5kQmVhY29uIEFQSSBpcyB1c2VkJywgYXN5bmMgKCkgPT4ge1xuICB3aW5kb3cuX19ST1VURV9QUkVGSVhfXyA9ICcvcm91dGVQcmVmaXgnO1xuICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbiA9IGplc3QuZm4oKHVybCwgcGF5bG9hZCkgPT4ge1xuICAgIGV4cGVjdCh1cmwpLnRvQmUoJy9yb3V0ZVByZWZpeC9fZXZlbnRzJyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xuICBjb25zdCBmZXRjaCA9IGplc3QuZm4oKTtcbiAgY29uc3QgYXBwID0gZ2V0QXBwKGZldGNoKTtcblxuICBhcHAubWlkZGxld2FyZSh7ZXZlbnRzOiBVbml2ZXJzYWxFdmVudHNUb2tlbn0sICh7ZXZlbnRzfSkgPT4ge1xuICAgIHJldHVybiAoY3R4LCBuZXh0KSA9PiB7XG4gICAgICBjb25zdCBlbWl0dGVyID0gZXZlbnRzLmZyb20oY3R4KTtcbiAgICAgIGV4cGVjdChlbWl0dGVyKS50b0JlKGV2ZW50cyk7XG4gICAgICBlbWl0dGVyLmVtaXQoJ2EnLCB7eDogMX0pO1xuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQodmlzaWJpbGl0eWNoYW5nZUV2ZW50KTtcbiAgICAgIGVtaXR0ZXIudGVhcmRvd24oKTtcbiAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfTtcbiAgfSk7XG4gIGNvbnN0IHNpbXVsYXRvciA9IGdldFNpbXVsYXRvcihhcHApO1xuICBhd2FpdCBzaW11bGF0b3IucmVuZGVyKCcvJyk7XG4gIGRlbGV0ZSB3aW5kb3cuX19ST1VURV9QUkVGSVhfXztcbn0pO1xuXG50ZXN0KCdCcm93c2VyIEV2ZW50RW1pdHRlciBzaG91bGQgbm90IHJvdXRlUHJlZml4IGlmIGZldGNoIEFQSSBpcyB1c2VkIHNpbmNlIGl0IGlzIGFwcGVuZGVkIGluIGNzcmYgcGx1Z2luJywgYXN5bmMgKCkgPT4ge1xuICB3aW5kb3cuX19ST1VURV9QUkVGSVhfXyA9ICcvcm91dGVQcmVmaXgnO1xuICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbiA9IHVuZGVmaW5lZDtcblxuICBjb25zdCBmZXRjaCA9IGplc3QuZm4oKTtcbiAgY29uc3QgYXBwID0gZ2V0QXBwKGZldGNoKTtcblxuICBhcHAubWlkZGxld2FyZSh7ZXZlbnRzOiBVbml2ZXJzYWxFdmVudHNUb2tlbn0sICh7ZXZlbnRzfSkgPT4ge1xuICAgIHJldHVybiAoY3R4LCBuZXh0KSA9PiB7XG4gICAgICBjb25zdCBlbWl0dGVyID0gZXZlbnRzLmZyb20oY3R4KTtcbiAgICAgIGV4cGVjdChlbWl0dGVyKS50b0JlKGV2ZW50cyk7XG4gICAgICBlbWl0dGVyLmVtaXQoJ2EnLCB7eDogMX0pO1xuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQodmlzaWJpbGl0eWNoYW5nZUV2ZW50KTtcbiAgICAgIGVtaXR0ZXIudGVhcmRvd24oKTtcbiAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfTtcbiAgfSk7XG4gIGNvbnN0IHNpbXVsYXRvciA9IGdldFNpbXVsYXRvcihhcHApO1xuICBhd2FpdCBzaW11bGF0b3IucmVuZGVyKCcvJyk7XG4gIGV4cGVjdChmZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9fZXZlbnRzJywgZXhwZWN0LmFueXRoaW5nKCkpO1xuICBkZWxldGUgd2luZG93Ll9fUk9VVEVfUFJFRklYX187XG59KTtcblxudGVzdCgnQnJvd3NlciBFdmVudEVtaXR0ZXIgLSBzaG91bGQgZmFsbCBiYWNrIHRvIGZldGNoIGlmIHNlbmRCZWFjb24gaXMgbm90IHN1cHBvcnRlZCcsIGFzeW5jICgpID0+IHtcbiAgbGV0IGZldGNoZWQgPSBmYWxzZTtcbiAgbGV0IGVtaXR0ZWQgPSBmYWxzZTtcbiAgbmF2aWdhdG9yLnNlbmRCZWFjb24gPSB1bmRlZmluZWQ7XG4gIGNvbnN0IGZldGNoOiBGZXRjaCA9IGplc3QuZm4oKHVybCwgb3B0aW9ucykgPT4ge1xuICAgIGlmIChcbiAgICAgICFvcHRpb25zIHx8XG4gICAgICAhb3B0aW9ucy5tZXRob2QgfHxcbiAgICAgICFvcHRpb25zLmhlYWRlcnMgfHxcbiAgICAgICFvcHRpb25zLmJvZHkgfHxcbiAgICAgIHR5cGVvZiBvcHRpb25zLmJvZHkgIT09ICdzdHJpbmcnXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBFeHBlY3RlZCBtZXRob2QsIGhlYWRlcnMsIGJvZHkgZnJvbSBvcHRpb25zIGFyZSBwb3B1bGF0ZWRgXG4gICAgICApO1xuICAgIH1cblxuICAgIGxldCB7bWV0aG9kLCBoZWFkZXJzLCBib2R5fSA9IG9wdGlvbnM7XG5cbiAgICBleHBlY3QodXJsKS50b0JlKCcvX2V2ZW50cycpO1xuICAgIGV4cGVjdChtZXRob2QpLnRvQmUoJ1BPU1QnKTtcbiAgICBleHBlY3QoXG4gICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXVxuICAgICkudG9CZSgnYXBwbGljYXRpb24vanNvbicpO1xuICAgIGNvbnN0IGpzb25Cb2R5ID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICBleHBlY3QoanNvbkJvZHkuaXRlbXMubGVuZ3RoKS50b0JlKDEpO1xuICAgIGV4cGVjdChqc29uQm9keS5pdGVtc1swXS5wYXlsb2FkLngpLnRvQmUoMSk7XG4gICAgZmV0Y2hlZCA9IHRydWU7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjcmVhdGVNb2NrRmV0Y2goKSk7XG4gIH0pO1xuXG4gIGNvbnN0IGFwcCA9IGdldEFwcChmZXRjaCk7XG4gIGFwcC5taWRkbGV3YXJlKHtldmVudHM6IFVuaXZlcnNhbEV2ZW50c1Rva2VufSwgKHtldmVudHN9KSA9PiB7XG4gICAgcmV0dXJuIChjdHgsIG5leHQpID0+IHtcbiAgICAgIGNvbnN0IGVtaXR0ZXIgPSBldmVudHMuZnJvbShjdHgpO1xuICAgICAgZXhwZWN0KGVtaXR0ZXIpLnRvQmUoZXZlbnRzKTtcbiAgICAgIGVtaXR0ZXIub24oJ2EnLCAoe3h9KSA9PiB7XG4gICAgICAgIGV4cGVjdCh4KS50b0JlKDEpO1xuICAgICAgICBlbWl0dGVkID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgZW1pdHRlci5lbWl0KCdhJywge3g6IDF9KTtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHZpc2liaWxpdHljaGFuZ2VFdmVudCk7XG4gICAgICBlbWl0dGVyLnRlYXJkb3duKCk7XG4gICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH07XG4gIH0pO1xuICBjb25zdCBzaW11bGF0b3IgPSBnZXRTaW11bGF0b3IoYXBwKTtcbiAgYXdhaXQgc2ltdWxhdG9yLnJlbmRlcignLycpO1xuXG4gIGV4cGVjdChmZXRjaCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICBleHBlY3QoZW1pdHRlZCkudG9CZSh0cnVlKTtcbiAgZXhwZWN0KGZldGNoZWQpLnRvQmUodHJ1ZSk7XG4gIGV4cGVjdChzdG9yZS5kYXRhLmxlbmd0aCkudG9CZSgwKTtcbn0pO1xuXG50ZXN0KCdCcm93c2VyIEV2ZW50RW1pdHRlciAtIHNob3VsZCBmYWxsIGJhY2sgdG8gZmV0Y2ggaWYgYmVhY29uIGZhaWxzIHRvIGVucXVldWUnLCBhc3luYyAoKSA9PiB7XG4gIG5hdmlnYXRvci5zZW5kQmVhY29uID0gamVzdC5mbigoKSA9PiBmYWxzZSk7XG4gIGNvbnN0IGZldGNoOiBGZXRjaCA9IGplc3QuZm4oKCkgPT5cbiAgICBQcm9taXNlLnJlc29sdmUoY3JlYXRlTW9ja0ZldGNoKHtvazogdHJ1ZX0pKVxuICApO1xuXG4gIGNvbnN0IGFwcCA9IGdldEFwcChmZXRjaCk7XG4gIGFwcC5taWRkbGV3YXJlKHtldmVudHM6IFVuaXZlcnNhbEV2ZW50c1Rva2VufSwgKHtldmVudHN9KSA9PiB7XG4gICAgcmV0dXJuIChjdHgsIG5leHQpID0+IHtcbiAgICAgIGNvbnN0IGVtaXR0ZXIgPSBldmVudHMuZnJvbShjdHgpO1xuICAgICAgZXhwZWN0KGVtaXR0ZXIpLnRvQmUoZXZlbnRzKTtcbiAgICAgIGVtaXR0ZXIuZW1pdCgnYScsIHt4OiAxfSk7XG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudCh2aXNpYmlsaXR5Y2hhbmdlRXZlbnQpO1xuICAgICAgZW1pdHRlci50ZWFyZG93bigpO1xuICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9O1xuICB9KTtcbiAgY29uc3Qgc2ltdWxhdG9yID0gZ2V0U2ltdWxhdG9yKGFwcCk7XG4gIGF3YWl0IHNpbXVsYXRvci5yZW5kZXIoJy8nKTtcblxuICBleHBlY3QobmF2aWdhdG9yLnNlbmRCZWFjb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgZXhwZWN0KGZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIGV4cGVjdChzdG9yZS5kYXRhLmxlbmd0aCkudG9CZSgwKTtcbn0pO1xuXG50ZXN0KCdCcm93c2VyIEV2ZW50RW1pdHRlciAtIHNob3VsZCBub3Qgc2VuZCBhbGwgdGhlIGV2ZW50cyBpZiBiZWFjb24gaXMgdG9vIGJpZycsIGFzeW5jICgpID0+IHtcbiAgbmF2aWdhdG9yLnNlbmRCZWFjb24gPSBqZXN0LmZuKCgpID0+IHRydWUpO1xuICBjb25zdCBmZXRjaDogRmV0Y2ggPSBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZShjcmVhdGVNb2NrRmV0Y2goKSkpO1xuXG4gIGNvbnN0IGFwcCA9IGdldEFwcChmZXRjaCk7XG4gIGFwcC5taWRkbGV3YXJlKHtldmVudHM6IFVuaXZlcnNhbEV2ZW50c1Rva2VufSwgKHtldmVudHN9KSA9PiB7XG4gICAgcmV0dXJuIChjdHgsIG5leHQpID0+IHtcbiAgICAgIGNvbnN0IGVtaXR0ZXIgPSBldmVudHMuZnJvbShjdHgpO1xuICAgICAgZXhwZWN0KGVtaXR0ZXIpLnRvQmUoZXZlbnRzKTtcbiAgICAgIGVtaXR0ZXIuZW1pdCgnYScsIHt4OiAnYScucmVwZWF0KDQwMDAwKX0pO1xuICAgICAgZW1pdHRlci5lbWl0KCdiJywge3g6ICdiJy5yZXBlYXQoNDAwMDApfSk7XG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudCh2aXNpYmlsaXR5Y2hhbmdlRXZlbnQpO1xuICAgICAgZW1pdHRlci50ZWFyZG93bigpO1xuICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9O1xuICB9KTtcbiAgY29uc3Qgc2ltdWxhdG9yID0gZ2V0U2ltdWxhdG9yKGFwcCk7XG4gIGF3YWl0IHNpbXVsYXRvci5yZW5kZXIoJy8nKTtcblxuICBleHBlY3QobmF2aWdhdG9yLnNlbmRCZWFjb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgZXhwZWN0KHN0b3JlLmRhdGEubGVuZ3RoKS50b0JlKDEpO1xufSk7XG5cbnRlc3QoJ0Jyb3dzZXIgRXZlbnRFbWl0dGVyIC0gc2hvdWxkIHVzZSBmZXRjaCBpZiBzaW5nbGUgZXZlbnQgaXMgbGFyZ2VyIHRoYW4gYmVhY29uIGxpbWl0JywgYXN5bmMgKCkgPT4ge1xuICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbiA9IGplc3QuZm4oKCkgPT4gdHJ1ZSk7XG4gIGNvbnN0IGZldGNoOiBGZXRjaCA9IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZU1vY2tGZXRjaCgpKSk7XG5cbiAgY29uc3QgYXBwID0gZ2V0QXBwKGZldGNoKTtcbiAgYXBwLm1pZGRsZXdhcmUoe2V2ZW50czogVW5pdmVyc2FsRXZlbnRzVG9rZW59LCAoe2V2ZW50c30pID0+IHtcbiAgICByZXR1cm4gKGN0eCwgbmV4dCkgPT4ge1xuICAgICAgY29uc3QgZW1pdHRlciA9IGV2ZW50cy5mcm9tKGN0eCk7XG4gICAgICBleHBlY3QoZW1pdHRlcikudG9CZShldmVudHMpO1xuICAgICAgZW1pdHRlci5lbWl0KCdhJywge3g6ICdhJy5yZXBlYXQoMTAwMDAwKX0pO1xuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQodmlzaWJpbGl0eWNoYW5nZUV2ZW50KTtcbiAgICAgIGVtaXR0ZXIudGVhcmRvd24oKTtcbiAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfTtcbiAgfSk7XG4gIGNvbnN0IHNpbXVsYXRvciA9IGdldFNpbXVsYXRvcihhcHApO1xuICBhd2FpdCBzaW11bGF0b3IucmVuZGVyKCcvJyk7XG5cbiAgZXhwZWN0KGZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIGV4cGVjdChzdG9yZS5kYXRhLmxlbmd0aCkudG9CZSgwKTtcbn0pO1xuXG50ZXN0KCdCcm93c2VyIEV2ZW50RW1pdHRlciAtIGZldGNoIGFkZHMgZXZlbnRzIGJhY2sgdG8gcXVldWUgaWYgdGhleSBmYWlsIHRvIHNlbmQnLCBhc3luYyAoKSA9PiB7XG4gIG5hdmlnYXRvci5zZW5kQmVhY29uID0gdW5kZWZpbmVkO1xuICBjb25zdCBmZXRjaDogRmV0Y2ggPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoY3JlYXRlTW9ja0ZldGNoKHtvazogZmFsc2V9KSk7XG5cbiAgY29uc3QgYXBwID0gZ2V0QXBwKGZldGNoKTtcbiAgYXBwLm1pZGRsZXdhcmUoe2V2ZW50czogVW5pdmVyc2FsRXZlbnRzVG9rZW59LCAoe2V2ZW50c30pID0+IHtcbiAgICByZXR1cm4gKGN0eCwgbmV4dCkgPT4ge1xuICAgICAgY29uc3QgZW1pdHRlciA9IGV2ZW50cy5mcm9tKGN0eCk7XG4gICAgICBleHBlY3QoZW1pdHRlcikudG9CZShldmVudHMpO1xuICAgICAgZW1pdHRlci5lbWl0KCdhJywge3g6IDF9KTtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHZpc2liaWxpdHljaGFuZ2VFdmVudCk7XG4gICAgICBlbWl0dGVyLnRlYXJkb3duKCk7XG4gICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH07XG4gIH0pO1xuICBjb25zdCBzaW11bGF0b3IgPSBnZXRTaW11bGF0b3IoYXBwKTtcbiAgYXdhaXQgc2ltdWxhdG9yLnJlbmRlcignLycpO1xuXG4gIGV4cGVjdChzdG9yZS5kYXRhLmxlbmd0aCkudG9CZSgxKTtcbn0pO1xuXG50ZXN0KCdCcm93c2VyIEV2ZW50RW1pdHRlciAtIGZldGNoIGFkZHMgZXZlbnRzIGJhY2sgdG8gcXVldWUgaWYgdGhleSBmYWlsIHRvIHNlbmQgMicsIGFzeW5jICgpID0+IHtcbiAgbmF2aWdhdG9yLnNlbmRCZWFjb24gPSB1bmRlZmluZWQ7XG4gIGNvbnN0IGZldGNoOiBGZXRjaCA9ICgpID0+IFByb21pc2UucmVqZWN0KCk7XG5cbiAgY29uc3QgYXBwID0gZ2V0QXBwKGZldGNoKTtcbiAgYXBwLm1pZGRsZXdhcmUoe2V2ZW50czogVW5pdmVyc2FsRXZlbnRzVG9rZW59LCAoe2V2ZW50c30pID0+IHtcbiAgICByZXR1cm4gKGN0eCwgbmV4dCkgPT4ge1xuICAgICAgY29uc3QgZW1pdHRlciA9IGV2ZW50cy5mcm9tKGN0eCk7XG4gICAgICBleHBlY3QoZW1pdHRlcikudG9CZShldmVudHMpO1xuICAgICAgZW1pdHRlci5lbWl0KCdhJywge3g6IDF9KTtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHZpc2liaWxpdHljaGFuZ2VFdmVudCk7XG4gICAgICBlbWl0dGVyLnRlYXJkb3duKCk7XG4gICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH07XG4gIH0pO1xuICBjb25zdCBzaW11bGF0b3IgPSBnZXRTaW11bGF0b3IoYXBwKTtcbiAgYXdhaXQgc2ltdWxhdG9yLnJlbmRlcignLycpO1xuXG4gIGV4cGVjdChzdG9yZS5kYXRhLmxlbmd0aCkudG9CZSgxKTtcbn0pO1xuXG50ZXN0KCdCcm93c2VyIEV2ZW50RW1pdHRlciBpbnRlcnZhbCcsIChkb25lKSA9PiB7XG4gIG5hdmlnYXRvci5zZW5kQmVhY29uID0gamVzdC5mbigoKSA9PiB0cnVlKTtcbiAgc3RvcmUuZ2V0QW5kQ2xlYXIoKTtcbiAgY29uc3QgZW1pdHRlciA9IG5ldyBVbml2ZXJzYWxFbWl0dGVyKFxuICAgICgpID0+IHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY3JlYXRlTW9ja0ZldGNoKCkpO1xuICAgIH0sXG4gICAge1xuICAgICAgYWRkKCkge30sXG4gICAgICBhZGRUb1N0YXJ0KCkge30sXG4gICAgICBnZXRBbmRDbGVhcigpIHtcbiAgICAgICAgZXhwZWN0KCdDYWxscyBzdG9yYWdlIGdldEFuZENsZWFyIG9uIGludGVydmFsJykudG9CZVRydXRoeSgpO1xuICAgICAgICBlbWl0dGVyLnRlYXJkb3duKCk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfSxcbiAgICB9LFxuICAgIDFcbiAgKTtcbn0pO1xuXG50ZXN0KCdSZXNwZWN0cyB0aGUgbGltaXQgd2hlbiBmbHVzaGluZycsIGFzeW5jICgpID0+IHtcbiAgbmF2aWdhdG9yLnNlbmRCZWFjb24gPSBqZXN0LmZuKCgpID0+IHRydWUpO1xuICBzdG9yZS5nZXRBbmRDbGVhcigpO1xuICBjb25zdCBmZXRjaDogRmV0Y2ggPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoY3JlYXRlTW9ja0ZldGNoKCkpO1xuICBjb25zdCBlbWl0dGVyID0gbmV3IFVuaXZlcnNhbEVtaXR0ZXIoZmV0Y2gsIHN0b3JlLCAyMDAwLCAyMCk7XG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA1MDsgaW5kZXgrKykge1xuICAgIGVtaXR0ZXIuZW1pdCgnYScsIHt4OiAxfSk7XG4gIH1cbiAgYXdhaXQgZW1pdHRlci5mbHVzaCgpO1xuICBleHBlY3Qoc3RvcmUuZGF0YS5sZW5ndGgpLnRvQmUoMzApO1xuICBhd2FpdCBlbWl0dGVyLmZsdXNoKCk7XG4gIGV4cGVjdChzdG9yZS5kYXRhLmxlbmd0aCkudG9CZSgxMCk7XG4gIGF3YWl0IGVtaXR0ZXIuZmx1c2goKTtcbiAgZXhwZWN0KHN0b3JlLmRhdGEubGVuZ3RoKS50b0JlKDApO1xuICBlbWl0dGVyLnRlYXJkb3duKCk7XG59KTtcblxudGVzdCgnQ2FsbGluZyBmbHVzaCBldmVuIG5vIGl0ZW1zIHdvcmtzIGFzIGV4cGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbiA9IGplc3QuZm4oKCkgPT4gdHJ1ZSk7XG4gIHN0b3JlLmdldEFuZENsZWFyKCk7XG4gIGNvbnN0IGZldGNoOiBGZXRjaCA9ICgpID0+IFByb21pc2UucmVzb2x2ZShjcmVhdGVNb2NrRmV0Y2goKSk7XG4gIGNvbnN0IGVtaXR0ZXIgPSBuZXcgVW5pdmVyc2FsRW1pdHRlcihmZXRjaCwgc3RvcmUsIDEwMCwgMjApO1xuICBhd2FpdCBlbWl0dGVyLmZsdXNoKCk7XG4gIGF3YWl0IGVtaXR0ZXIuZmx1c2goKTtcbiAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwMCkpO1xuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgMjA7IGluZGV4KyspIHtcbiAgICBlbWl0dGVyLmVtaXQoJ2EnLCB7eDogMX0pO1xuICB9XG4gIGF3YWl0IGVtaXR0ZXIuZmx1c2goKTtcbiAgZXhwZWN0KHN0b3JlLmRhdGEubGVuZ3RoKS50b0JlKDApO1xuICBlbWl0dGVyLnRlYXJkb3duKCk7XG59KTtcblxudGVzdCgnRmV0Y2ggbG93ZXJzIGxpbWl0IGZvciA0MTMgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbiA9IHVuZGVmaW5lZDtcbiAgc3RvcmUuZ2V0QW5kQ2xlYXIoKTtcbiAgY29uc3QgZmV0Y2g6IEZldGNoID0gKCkgPT5cbiAgICBQcm9taXNlLnJlc29sdmUoY3JlYXRlTW9ja0ZldGNoKHtzdGF0dXM6IDQxMywgb2s6IGZhbHNlfSkpO1xuICBjb25zdCBlbWl0dGVyID0gbmV3IFVuaXZlcnNhbEVtaXR0ZXIoZmV0Y2gsIHN0b3JlLCAyMDAwLCAyMCk7XG4gIGVtaXR0ZXIuZW1pdCgnYScsIHt4OiAxfSk7XG4gIGF3YWl0IGVtaXR0ZXIuZmx1c2goKTtcbiAgZXhwZWN0KHN0b3JlLmRhdGEubGVuZ3RoKS50b0JlKDEpO1xuICBleHBlY3QoZW1pdHRlci5saW1pdCkudG9CZSgxMCk7XG4gIGF3YWl0IGVtaXR0ZXIuZmx1c2goKTtcbiAgZXhwZWN0KGVtaXR0ZXIubGltaXQpLnRvQmUoNSk7XG4gIGF3YWl0IGVtaXR0ZXIuZmx1c2goKTtcbiAgZW1pdHRlci50ZWFyZG93bigpO1xufSk7XG5cbmNvbnN0IHNsZWVwID0gKG1zKSA9PiBzZXRUaW1lb3V0KCgpID0+IHt9LCBtcyk7XG5cbnRlc3QoJ0Jyb3dzZXIgRXZlbnRFbWl0dGVyIGRvZXMgbm90IHN0YXJ0IGEgbmV3IGZsdXNoIHdoaWxlIGFub3RoZXIgb25lIGlzIGluIHByb2dyZXNzJywgYXN5bmMgKCkgPT4ge1xuICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbiA9IHVuZGVmaW5lZDtcbiAgc3RvcmUuZ2V0QW5kQ2xlYXIoKTtcbiAgbGV0IHJlc29sdmVGZXRjaDogKHJlc3VsdDogYW55KSA9PiB2b2lkID0gKCkgPT4ge307XG4gIGNvbnN0IGZldGNoOiBGZXRjaCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoXG4gICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHJlc29sdmVGZXRjaCA9IHJlc29sdmU7XG4gICAgfSlcbiAgKTtcbiAgY29uc3QgZW1pdHRlciA9IG5ldyBVbml2ZXJzYWxFbWl0dGVyKGZldGNoLCBzdG9yZSwgMjAwMCwgMjApO1xuICBlbWl0dGVyLmVtaXQoJ2EnLCB7eDogMX0pO1xuICBlbWl0dGVyLmZsdXNoKCk7XG4gIGVtaXR0ZXIuZW1pdCgnYicsIHt5OiAxfSk7XG4gIGVtaXR0ZXIuZmx1c2goKTtcbiAgZW1pdHRlci5mbHVzaCgpO1xuICAvLyBmaXJzdCByZXF1ZXN0IGlzIG5vdCByZXNvbHZlZCwgb25seSBvbmUgcmVxdWVzdCBhdCB0aGUgbW9tZW50XG4gIGV4cGVjdChmZXRjaCkudG9CZUNhbGxlZFRpbWVzKDEpO1xuICByZXNvbHZlRmV0Y2goY3JlYXRlTW9ja0ZldGNoKCkpO1xuICBhd2FpdCBzbGVlcCgxKTtcbiAgLy8gc2NoZWR1bGVkIGZsdXNoIHNob3VsZCBiZSBzdGFydGVkIGFmdGVyIGZpcnN0IHJlcXVlc3QvZmx1c2ggaXMgcmVzb2x2ZWRcbiAgZXhwZWN0KGZldGNoKS50b0JlQ2FsbGVkVGltZXMoMik7XG4gIHJlc29sdmVGZXRjaChjcmVhdGVNb2NrRmV0Y2goKSk7XG4gIGF3YWl0IHNsZWVwKDEpO1xuICAvLyBubyBtb3JlIGFkZGl0aW9uYWwgZmx1c2ggaXMgbmVlZGVkIGFzIGZhciBhcyBubyBldmVudHMgd2VyZSBlbWl0dGVkXG4gIGV4cGVjdChmZXRjaCkudG9CZUNhbGxlZFRpbWVzKDIpO1xuICBlbWl0dGVyLnRlYXJkb3duKCk7XG59KTtcblxudGVzdCgnQnJvd3NlciBFdmVudEVtaXR0ZXIgLSBzaG91bGQgbm90IHNlbmQgcGF5bG9hZHMgbGFyZ2VyIHRoYW4geGhyIGJvZHkgbGltaXQnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGZldGNoOiBGZXRjaCA9IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZU1vY2tGZXRjaCgpKSk7XG5cbiAgY29uc3QgYXBwID0gZ2V0QXBwKGZldGNoKTtcbiAgYXBwLm1pZGRsZXdhcmUoe2V2ZW50czogVW5pdmVyc2FsRXZlbnRzVG9rZW59LCAoe2V2ZW50c30pID0+IHtcbiAgICByZXR1cm4gKGN0eCwgbmV4dCkgPT4ge1xuICAgICAgY29uc3QgZW1pdHRlciA9IGV2ZW50cy5mcm9tKGN0eCk7XG4gICAgICBleHBlY3QoZW1pdHRlcikudG9CZShldmVudHMpO1xuICAgICAgLy8gZW1pdCA1IGV2ZW50cyB0aGF0IGFyZSBlYWNoIHNsaWdobHkgdW5kZXIgaGFsZiB0aGUgbWF4IHBheWxvYWQgbGltaXRcbiAgICAgIGVtaXR0ZXIuZW1pdCgnYScsIHt4OiAnYScucmVwZWF0KDEwNDg1NzYgLyAyIC0gMTAwKX0pO1xuICAgICAgZW1pdHRlci5lbWl0KCdiJywge3g6ICdiJy5yZXBlYXQoMTA0ODU3NiAvIDIgLSAxMDApfSk7XG4gICAgICBlbWl0dGVyLmVtaXQoJ2MnLCB7eDogJ2MnLnJlcGVhdCgxMDQ4NTc2IC8gMiAtIDEwMCl9KTtcbiAgICAgIGVtaXR0ZXIuZW1pdCgnZCcsIHt4OiAnZScucmVwZWF0KDEwNDg1NzYgLyAyIC0gMTAwKX0pO1xuICAgICAgZW1pdHRlci5lbWl0KCdlJywge3g6ICdlJy5yZXBlYXQoMTA0ODU3NiAvIDIgLSAxMDApfSk7XG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudCh2aXNpYmlsaXR5Y2hhbmdlRXZlbnQpO1xuICAgICAgZW1pdHRlci50ZWFyZG93bigpO1xuICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9O1xuICB9KTtcblxuICBjb25zdCBzaW11bGF0b3IgPSBnZXRTaW11bGF0b3IoYXBwKTtcbiAgYXdhaXQgc2ltdWxhdG9yLnJlbmRlcignLycpO1xuICBleHBlY3Qoc3RvcmUuZGF0YS5sZW5ndGgpLnRvQmUoMyk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFTQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUcwQjtBQUFBO0FBQUE7QUFyQjFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFdUI7O0FBY3ZCO0FBQ0FBLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxRQUFRLEVBQUUsaUJBQWlCLEVBQUU7RUFBQ0MsS0FBSyxFQUFFO0FBQVEsQ0FBQyxDQUFDO0FBQ3JFLE1BQU1DLHFCQUFxQixHQUFHLElBQUlDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQzs7QUFFM0Q7QUFDQSxTQUFTQyxNQUFNLENBQUNDLEtBQVksRUFBRTtFQUM1QixNQUFNQyxHQUFHLEdBQUcsSUFBSUMsbUJBQUcsQ0FBQyxJQUFJLEVBQUdDLEVBQUUsSUFBS0EsRUFBRSxDQUFDO0VBQ3JDRixHQUFHLENBQUNHLFFBQVEsQ0FBQ0Msd0JBQVUsRUFBRUwsS0FBSyxDQUFDO0VBQy9CTSw0QkFBSyxDQUFDQyxXQUFXLEVBQUU7RUFDbkJOLEdBQUcsQ0FBQ0csUUFBUSxDQUFDSSx3Q0FBZ0MsRUFBRUYsNEJBQUssQ0FBQztFQUNyREwsR0FBRyxDQUFDRyxRQUFRLENBQUNLLDJCQUFvQixFQUFFQyxnQkFBTSxDQUFDO0VBQzFDLE9BQU9ULEdBQUc7QUFDWjtBQUVBLFNBQVNVLGVBQWUsQ0FBQ0MsY0FBb0IsRUFBWTtFQUN2RCxNQUFNQyxZQUFZLEdBQUcsSUFBSUMsUUFBUSxFQUFFO0VBQ25DO0VBQ0EsT0FBTztJQUNMLEdBQUdELFlBQVk7SUFDZixHQUFHRDtFQUNMLENBQUM7QUFDSDtBQUVB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